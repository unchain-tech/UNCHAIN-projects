###  ğŸ–¥ ã“ã®ãƒ¬ãƒƒã‚¹ãƒ³ã®å‚è€ƒå‹•ç”»URL
[Dapp University](https://youtu.be/CgXQC4dbGUE?t=3794)

### ğŸ“ ã‚¹ãƒ†ãƒ¼ã‚­ãƒ³ã‚°ã®ä»•çµ„ã¿å®Ÿè£…ã™ã‚‹

ã“ã“ã‹ã‚‰ã¯ã“ã®Yield Farmingã®æ ¹å¹¹ã¨ãªã‚‹ã‚¹ãƒ†ãƒ¼ã‚­ãƒ³ã‚°ã®ã‚·ã‚¹ãƒ†ãƒ ã‚’å®Ÿè£…ã—ã¦ã„ãã¾ã™ã€‚

ã¾ãšã€`TokenFarm.sol`ã‚’ä»¥ä¸‹ã®ã‚ˆã†ã«æ›´æ–°ã—ã¦ã„ãã¾ã—ã‚‡ã†ã€‚

```solidity
pragma solidity ^0.8.18;

import "./DappToken.sol";
import "./MockDaiToken.sol";

contract TokenFarm{
    string public name = "Dapp Token Farm";
    DappToken public dappToken;
    DaiToken public daiToken;

    // 7. ã“ã‚Œã¾ã§ã«ã‚¹ãƒ†ãƒ¼ã‚­ãƒ³ã‚°ã‚’è¡Œã£ãŸã™ã¹ã¦ã®ã‚¢ãƒ‰ãƒ¬ã‚¹ã‚’è¿½è·¡ã™ã‚‹é…åˆ—ã‚’ä½œæˆ
    address[] public stakers;

    // 4.æŠ•è³‡å®¶ã®ã‚¢ãƒ‰ãƒ¬ã‚¹ã¨å½¼ã‚‰ã®ã‚¹ãƒ†ãƒ¼ã‚­ãƒ³ã‚°ã—ãŸãƒˆãƒ¼ã‚¯ãƒ³ã®é‡ã‚’ç´ã¥ã‘ã‚‹ mapping ã‚’ä½œæˆ
    mapping (address => uint) public stakingBalance;

    // 6. æŠ•è³‡å®¶ã®ã‚¢ãƒ‰ãƒ¬ã‚¹ã‚’ã‚‚ã¨ã«å½¼ã‚‰ãŒã‚¹ãƒ†ãƒ¼ã‚­ãƒ³ã‚°ã‚’è¡Œã£ãŸã‹å¦ã‹ã‚’ç´ã¥ã‘ã‚‹ mapping ã‚’ä½œæˆ
    mapping (address => bool) public hasStaked;

    // 10. æŠ•è³‡å®¶ã®æœ€æ–°ã®ã‚¹ãƒ†ã‚¤ã‚¿ã‚¹ã‚’è¨˜éŒ²ã™ã‚‹ãƒãƒƒãƒ”ãƒ³ã‚°ã‚’ä½œæˆ
    mapping (address => bool) public isStaking;

    constructor(DappToken _dappToken, DaiToken _daiToken){
        dappToken = _dappToken;
        daiToken = _daiToken;
    }
    // 1.ã‚¹ãƒ†ãƒ¼ã‚­ãƒ³ã‚°æ©Ÿèƒ½ã‚’ä½œæˆã™ã‚‹
    function stakeTokens(uint _amount) public {
        // 2. ã‚¹ãƒ†ãƒ¼ã‚­ãƒ³ã‚°ã•ã‚Œã‚‹ãƒˆãƒ¼ã‚¯ãƒ³ãŒ0ä»¥ä¸Šã‚ã‚‹ã“ã¨ã‚’ç¢ºèª
        require(_amount > 0, "amount can't be 0");
        // 3. æŠ•è³‡å®¶ã®ãƒˆãƒ¼ã‚¯ãƒ³ã‚’ TokenFarm.sol ã«ç§»å‹•ã•ã›ã‚‹
        daiToken.transferFrom(msg.sender, address(this), _amount);

        // 5. ã‚¹ãƒ†ãƒ¼ã‚­ãƒ³ã‚°ã•ã‚ŒãŸãƒˆãƒ¼ã‚¯ãƒ³ã®æ®‹é«˜ã‚’æ›´æ–°ã™ã‚‹
        stakingBalance[msg.sender] = stakingBalance[msg.sender] + _amount;

        // 8. æŠ•è³‡å®¶ãŒã¾ã ã‚¹ãƒ†ãƒ¼ã‚¯ã—ã¦ã„ãªã„å ´åˆã®ã¿ã€å½¼ã‚‰ã‚’stakersé…åˆ—ã«è¿½åŠ ã™ã‚‹
        if(!hasStaked[msg.sender]){
            stakers.push(msg.sender);
        }
        // 9. ã‚¹ãƒ†ãƒ¼ã‚­ãƒ³ã‚°ã‚¹ãƒ†ãƒ¼ã‚¿ã‚¹ã®æ›´æ–°
        isStaking[msg.sender] = true;
        hasStaked[msg.sender] = true;
    }
}
```

ã‚³ãƒ¼ãƒ‰ã®ç†è§£ã‚’ä¿ƒé€²ã™ã‚‹ãŸã‚ã«ã€1ã‹ã‚‰10ã¾ã§ã‚³ãƒ¡ãƒ³ãƒˆã«ç•ªå·ã‚’æŒ¯ã‚Šã¾ã—ãŸã€‚1ã¤ãšã¤ã¿ã¦ã„ãã¾ã—ã‚‡ã†ã€‚

ã¾ãšã€æ–°ã—ãè¿½åŠ ã•ã‚ŒãŸã€€`stakeTokens()`é–¢æ•°ã«æ³¨ç›®ã—ã¦ãã ã•ã„ã€‚

```solidity
// 1.ã‚¹ãƒ†ãƒ¼ã‚­ãƒ³ã‚°æ©Ÿèƒ½ã‚’ä½œæˆã™ã‚‹
function stakeTokens(uint _amount) public {
ï¼š
}
```

`stakeTokens`é–¢æ•°ã¯ã€ã‚¹ãƒ†ãƒ¼ã‚¯ã™ã‚‹ãƒˆãƒ¼ã‚¯ãƒ³ã®é‡(`_amount`)ã‚’å¼•æ•°ã¨ã—ã¦ã„ã¾ã™ã€‚

- ã¾ãŸã€ã“ã®é–¢æ•°ã¯ã€ã‚¹ãƒãƒ¼ãƒˆã‚³ãƒ³ãƒˆãƒ©ã‚¯ãƒˆã®å¤–éƒ¨ã‹ã‚‰å‘¼ã³å‡ºã›ã‚‹ã‚ˆã†ã«`public`ä¿®é£¾å­ã‚’æŒã£ã¦ã„ã¾ã™ã€‚

`stakeTokens`é–¢æ•°ã®ä¸»ãªå½¹å‰²ã¯ã€**æŠ•è³‡å®¶ã®ã‚¦ã‚©ãƒ¬ãƒƒãƒˆã‹ã‚‰`TokenFarm.sol`ã¨ã„ã†ã‚¹ãƒãƒ¼ãƒˆã‚³ãƒ³ãƒˆãƒ©ã‚¯ãƒˆã« Dai ãƒˆãƒ¼ã‚¯ãƒ³ã‚’è»¢é€ã™ã‚‹ã“ã¨**ã§ã™ã€‚

æ›´ã«è©³ã—ãè¦‹ã¦ã„ãã¾ã—ã‚‡ã†ã€‚

```solidity
// 1. ã‚¹ãƒ†ãƒ¼ã‚­ãƒ³ã‚°æ©Ÿèƒ½ã‚’ä½œæˆã™ã‚‹
function stakeTokens(uint _amount) public {
    // 2. ã‚¹ãƒ†ãƒ¼ã‚­ãƒ³ã‚°ã•ã‚Œã‚‹ãƒˆãƒ¼ã‚¯ãƒ³ãŒ0ä»¥ä¸Šã‚ã‚‹ã“ã¨ã‚’ç¢ºèª
    require(_amount > 0, "amount can't be 0");
    // 3. æŠ•è³‡å®¶ã®ãƒˆãƒ¼ã‚¯ãƒ³ã‚’ TokenFarm.sol ã«ç§»å‹•ã•ã›ã‚‹
    daiToken.transferFrom(msg.sender, address(this), _amount);
:
}
```

ã“ã“ã§æœ€ã‚‚é‡è¦ã«ãªã‚‹ã®ãŒã€`transferFrom()`é–¢æ•°ã§ã™ã€‚

`daiToken`ã®ã‚‚ã¨ã¨ãªã‚‹ã‚¹ãƒãƒ¼ãƒˆã‚³ãƒ³ãƒˆãƒ©ã‚¯ãƒˆ`MockDaiToken.sol`ã¯ä»–ã®ERC-20ãƒˆãƒ¼ã‚¯ãƒ³ã¨åŒã˜ã‚ˆã†ã«`transferFrom()`é–¢æ•°ã‚’ä¿æŒã—ã¦ã„ã¾ã™ã€‚
- `transferFrom()`é–¢æ•°ã®ä¸­èº«ãŒæ°—ã«ãªã‚‹äººã¯ã€`MockDaiToken.sol`ã®ä¸­ã«å®šç¾©ã•ã‚Œã¦ã„ã‚‹`transferFrom()`ã‚’è¦‹ã¦ã¿ã¦ãã ã•ã„!

`transferFrom()`ã‚’ä½¿ç”¨ã™ã‚‹ã¨ã€æŠ•è³‡å®¶ã«ä»£ã‚ã£ã¦ã‚³ãƒ³ãƒˆãƒ©ã‚¯ãƒˆè‡ªä½“(`TokenFarm.sol`)ãŒã€å®Ÿéš›ã«è³‡é‡‘ã‚’ç§»å‹•ã•ã›ã‚‹ã“ã¨ãŒã§ãã‚‹ã‚ˆã†ã«ãªã‚Šã¾ã™ã€‚
- `msg.sender`ã¯Solidityå†…éƒ¨ã®ç‰¹åˆ¥ãªå¤‰æ•°ã§ã™ã€‚`msg`ã¾ãŸã¯ãƒ¡ãƒƒã‚»ãƒ¼ã‚¸ã¯Solidityå†…ã®ã‚°ãƒ­ãƒ¼ãƒãƒ«å¤‰æ•°ã§ã€é–¢æ•°ãŒå‘¼ã³å‡ºã•ã‚Œã‚‹ãŸã³ã«é€ä¿¡ã•ã‚Œã‚‹ãƒ¡ãƒƒã‚»ãƒ¼ã‚¸ã«å¯¾å¿œã—ã¾ã™ã€‚`sender`ã¯é–¢æ•°ã‚’å‘¼ã³å‡ºã—ãŸäººã‚’æ„å‘³ã—ã¾ã™ã€‚
- ç¬¬äºŒå¼•æ•°`address(this)`ã¯ã€ã‚¢ãƒ‰ãƒ¬ã‚¹å‹ã«å¤‰æ›ã•ã‚ŒãŸã‚¹ãƒãƒ¼ãƒˆã‚³ãƒ³ãƒˆãƒ©ã‚¯ãƒˆãã®ã‚‚ã®(`TokenFarm.sol`)ã§ã™ã€‚
- ç¬¬ä¸‰å¼•æ•°ã¯ã€ `msg.sender`ãŒç§»å‹•ã•ã›ã‚‹ãƒˆãƒ¼ã‚¯ãƒ³ã®é‡`amount`ã‚’æ„å‘³ã—ã¾ã™ã€‚

### ğŸ ã‚¹ãƒ†ãƒ¼ã‚­ãƒ³ã‚°ã«é–¢ã™ã‚‹ãƒ‡ãƒ¼ã‚¿ã‚’ä¿å­˜ã™ã‚‹

`stakeTokens()`é–¢æ•°ã‚’å®Ÿè£…ã™ã‚‹ãŸã‚ã«ã¯ã€ã„ã‚ã„ã‚ãªã“ã¨ã‚’è¨˜éŒ²ã—ã¦ãŠãå¿…è¦ãŒã‚ã‚Šã¾ã™ã€‚
- ãƒˆãƒ¼ã‚¯ãƒ³ãƒ•ã‚¡ãƒ¼ãƒ ã®ä¸­ã«ã©ã‚Œã ã‘ã®ãƒˆãƒ¼ã‚¯ãƒ³ãŒã‚ã‚‹ã®ã‹ã€ãƒ¦ãƒ¼ã‚¶ãƒ¼ãŒã©ã‚Œã ã‘ã®é‡‘é¡ã‚’é ã‘ã¦ã„ã‚‹ã®ã‹ã€ãªã©ã€‚

ãã®ãŸã‚ã«ã€ã¾ãšã€æŠ•è³‡å®¶ã®ã‚¢ãƒ‰ãƒ¬ã‚¹ã¨å½¼ã‚‰ã®ã‚¹ãƒ†ãƒ¼ã‚­ãƒ³ã‚°ã—ãŸãƒˆãƒ¼ã‚¯ãƒ³ã®é‡ã‚’ç´ã¥ã‘ã‚‹ãƒãƒƒãƒ”ãƒ³ã‚°ã‚’ä½œæˆã—ã¾ã™ã€‚

```solidity
// 4.æŠ•è³‡å®¶ã®ã‚¢ãƒ‰ãƒ¬ã‚¹ã¨å½¼ã‚‰ã®ã‚¹ãƒ†ãƒ¼ã‚­ãƒ³ã‚°ã—ãŸãƒˆãƒ¼ã‚¯ãƒ³ã®é‡ã‚’ç´ã¥ã‘ã‚‹ mapping ã‚’ä½œæˆ
mapping (address => uint) public stakingBalance;
```

ãƒãƒƒãƒ”ãƒ³ã‚°ã¯Keyã«å¯¾å¿œã™ã‚‹Valueã‚’è¿”ã™ãƒ‡ãƒ¼ã‚¿æ§‹é€ ã§ã™ã€‚
ä»Šå›å®šç¾©ã—ãŸ`stakingBalance`ã®å ´åˆã€Keyã¯`address`ï¼ˆæŠ•è³‡ã®ã‚¦ã‚©ãƒ¬ãƒƒãƒˆã‚¢ãƒ‰ãƒ¬ã‚¹ï¼‰ã€Valueã¯æŠ•è³‡å®¶ãŒã‚¹ãƒ†ãƒ¼ã‚¯ã™ã‚‹ãƒˆãƒ¼ã‚¯ãƒ³ã®é‡ã«ãªã‚Šã¾ã™ã€‚

æ¬¡ã«ã€`stakeTokens()`ã®ä¸­ã§ã€`stakingBalance`ãƒãƒƒãƒ”ãƒ³ã‚°ã‚’ä½¿ç”¨ã—ã€ã‚¹ãƒ†ãƒ¼ã‚­ãƒ³ã‚°ã•ã‚ŒãŸãƒˆãƒ¼ã‚¯ãƒ³ã®æ®‹é«˜ãŒæ›´æ–°ã•ã‚Œã‚‹ã‚ˆã†ã«ã—ã¾ã™ã€‚

```solidity
// 5. ã‚¹ãƒ†ãƒ¼ã‚­ãƒ³ã‚°ã•ã‚ŒãŸãƒˆãƒ¼ã‚¯ãƒ³ã®æ®‹é«˜ã‚’æ›´æ–°ã™ã‚‹
stakingBalance[msg.sender] = stakingBalance[msg.sender] + _amount;
```

æ¬¡ã«ã€æŠ•è³‡å®¶ãŒã‚¹ãƒ†ãƒ¼ã‚­ãƒ³ã‚°ã‚’è¡Œã£ãŸã“ã¨ã‚’è¨˜éŒ²ã—ã¦ã„ãã¾ã™ã€‚ãã®ãŸã‚ã«ã€åˆ¥ã®ãƒãƒƒãƒ”ãƒ³ã‚°ã‚’ä½œæˆã—ã¾ã™ã€‚

```solidity
// 6. æŠ•è³‡å®¶ã®ã‚¢ãƒ‰ãƒ¬ã‚¹ã‚’ã‚‚ã¨ã«å½¼ã‚‰ãŒã‚¹ãƒ†ãƒ¼ã‚­ãƒ³ã‚°ã‚’è¡Œã£ãŸã‹å¦ã‹ã‚’ç´ã¥ã‘ã‚‹ mapping ã‚’ä½œæˆ
mapping (address => bool) public hasStaked;
```

ã¾ãŸã€ã“ã‚Œã¾ã§ã«ã‚¹ãƒ†ãƒ¼ã‚¯ã—ãŸã“ã¨ã®ã‚ã‚‹ã™ã¹ã¦ã®ã‚¢ãƒ‰ãƒ¬ã‚¹ã‚’è¿½è·¡ã™ã‚‹é…åˆ—(`stakers`)ã‚‚ä½œæˆã—ã¾ã™ã€‚

```solidity
// 7. ã“ã‚Œã¾ã§ã«ã‚¹ãƒ†ãƒ¼ã‚­ãƒ³ã‚°ã‚’è¡Œã£ãŸã™ã¹ã¦ã®ã‚¢ãƒ‰ãƒ¬ã‚¹ã‚’è¿½è·¡ã™ã‚‹é…åˆ—ã‚’ä½œæˆ
address[] public stakers;
```

Solidityã®é…åˆ—ã¯ãƒªã‚¹ãƒˆãªã®ã§ã€`stakers`ã®ä¸­èº«ã¯ã€ä»¥ä¸‹ã®ã‚ˆã†ãªå½¢ã«ãªã‚Šã¾ã™ã€‚

```
["0x0...", "0x43...", "0x12..."]
```

`stakers`é…åˆ—ãŒå¿…è¦ãªã®ã¯ã€å¾Œã§ã‚¹ãƒ†ãƒ¼ã‚­ãƒ³ã‚°ã‚’ã—ã¦ãã‚ŒãŸæŠ•è³‡å®¶ãŸã¡ã«å ±é…¬ã‚’ç™ºè¡Œã™ã‚‹å¿…è¦ãŒã‚ã‚‹ãŸã‚ã§ã™ã€‚

ãã‚Œã§ã¯ã€`stakeTokens()`ã«æˆ»ã‚Šã€æŠ•è³‡å®¶ã‚’`stakers`é…åˆ—ã«è¿½åŠ ã™ã‚‹æ©Ÿèƒ½ã‚’ã¿ã¦ã„ãã¾ã—ã‚‡ã†ã€‚

```solidity
// 8. æŠ•è³‡å®¶ãŒã¾ã ã‚¹ãƒ†ãƒ¼ã‚¯ã—ã¦ã„ãªã„å ´åˆã®ã¿ã€å½¼ã‚‰ã‚’stakersé…åˆ—ã«è¿½åŠ ã™ã‚‹
if(!hasStaked[msg.sender]){
    stakers.push(msg.sender);
}
```

ã“ã“ã§ãƒã‚¤ãƒ³ãƒˆã¨ãªã‚‹ã®ã¯ã€`stakers`é…åˆ—ã«ã¯ã€ãƒ¦ãƒ‹ãƒ¼ã‚¯ãªã‚¢ãƒ‰ãƒ¬ã‚¹ã®ã¿ä¿ç®¡ã—ã¦ã„ã‚‹ã¨ã„ã†ã“ã¨ã§ã™ã€‚

ã‚ˆã£ã¦ã€ä¸Šè¨˜ã®ã‚³ãƒ¼ãƒ‰ã§ã¯ã€**ã‚¹ãƒ†ãƒ¼ã‚­ãƒ³ã‚°ã™ã‚‹æŠ•è³‡å®¶ï¼ˆãƒ¦ãƒ¼ã‚¶ãƒ¼ï¼‰ãŒ Token Farm ã®ã¯ã˜ã‚ã¦ã®ãŠå®¢æ§˜ã§ã‚ã£ãŸå ´åˆã«ã®ã¿**ã€å½¼ã‚‰ã®ã‚¢ãƒ‰ãƒ¬ã‚¹ã‚’ã€`stakers`é…åˆ—ã«è¿½åŠ ã™ã‚‹ä»•æ§˜ã«ãªã£ã¦ã„ã¾ã™ã€‚


æœ€å¾Œã«ã€æŠ•è³‡å®¶ã®ã‚¹ãƒ†ãƒ¼ã‚­ãƒ³ã‚°ã«é–¢ã™ã‚‹çŠ¶æ…‹ã‚’æ›´æ–°ã™ã‚‹ã‚³ãƒ¼ãƒ‰ã‚’è¿½åŠ ã—ã¾ã™ã€‚

```solidity
// 9. ã‚¹ãƒ†ãƒ¼ã‚­ãƒ³ã‚°ã‚¹ãƒ†ãƒ¼ã‚¿ã‚¹ã®æ›´æ–°
isStaking[msg.sender] = true;
hasStaked[msg.sender] = true;
```

```solidity
// 10. æŠ•è³‡å®¶ã®æœ€æ–°ã®ã‚¹ãƒ†ã‚¤ã‚¿ã‚¹ã‚’è¨˜éŒ²ã™ã‚‹ãƒãƒƒãƒ”ãƒ³ã‚°ã‚’ä½œæˆ
mapping (address => bool) public isStaking;
```
æœ€å¾Œã«ã€Yield Farmingã‚’å®Œæˆã•ã›ã‚‹ãŸã‚ã«ã€æ®‹ã‚Š2ã¤ã®æ©Ÿèƒ½ã‚’å®Ÿè£…ã—ã¦ã„ãã¾ã™ã€‚
1. ã‚³ãƒŸãƒ¥ãƒ‹ãƒ†ã‚£ã®ãƒˆãƒ¼ã‚¯ãƒ³ç™ºè¡Œæ©Ÿèƒ½
2. ã‚¹ãƒ†ãƒ¼ã‚­ãƒ³ã‚°ã—ãŸãƒˆãƒ¼ã‚¯ãƒ³ã‚’æ‰‹å…ƒã«æˆ»ã™æ©Ÿèƒ½ï¼ˆã‚¢ãƒ³ã‚¹ãƒ†ãƒ¼ã‚­ãƒ³ã‚°æ©Ÿèƒ½ï¼‰

ãã‚Œã§ã¯æ—©é€Ÿ`TokenFarm.sol`ã‚’ä¸‹ã®ã‚ˆã†ã«æ›´æ–°ã—ã¦ã„ãã¾ã—ã‚‡ã†!

```solidity
// SPDX-License-Identifier: MIT
pragma solidity ^0.8.18;

import "./DappToken.sol";
import "./MockDaiToken.sol";

contract TokenFarm{
    string public name = "Dapp Token Farm";
    address public owner;
    DappToken public dappToken;
    DaiToken public daiToken;

    address[] public stakers;
    mapping (address => uint) public stakingBalance;
    mapping (address => bool) public hasStaked;
    mapping (address => bool) public isStaking;

    constructor(DappToken _dappToken, DaiToken _daiToken){
        dappToken = _dappToken;
        daiToken = _daiToken;
        owner = msg.sender;
    }


    //1.ã‚¹ãƒ†ãƒ¼ã‚­ãƒ³ã‚°æ©Ÿèƒ½
    function stakeTokens(uint _amount) public {
        require(_amount > 0, "amount can't be 0");
        daiToken.transferFrom(msg.sender, address(this), _amount);

        stakingBalance[msg.sender] = stakingBalance[msg.sender] + _amount;

        if(!hasStaked[msg.sender]){
            stakers.push(msg.sender);
        }

        isStaking[msg.sender] = true;
        hasStaked[msg.sender] = true;
    }

    // ----- è¿½åŠ ã™ã‚‹æ©Ÿèƒ½ ------ //
    //2.ãƒˆãƒ¼ã‚¯ãƒ³ã®ç™ºè¡Œæ©Ÿèƒ½
    function issueTokens() public {
        // Dapp ãƒˆãƒ¼ã‚¯ãƒ³ã‚’ç™ºè¡Œã§ãã‚‹ã®ã¯ã‚ãªãŸã®ã¿ã§ã‚ã‚‹ã“ã¨ã‚’ç¢ºèªã™ã‚‹
        require(msg.sender == owner, "caller must be the owner");

        // æŠ•è³‡å®¶ãŒé ã‘ãŸå½Daiãƒˆãƒ¼ã‚¯ãƒ³ã®æ•°ã‚’ç¢ºèªã—ã€åŒé‡ã®Dappãƒˆãƒ¼ã‚¯ãƒ³ã‚’ç™ºè¡Œã™ã‚‹
        for(uint i=0; i<stakers.length; i++){
            // recipient ã¯ Dapp ãƒˆãƒ¼ã‚¯ãƒ³ã‚’å—ã‘å–ã‚‹æŠ•è³‡å®¶
            address recipient = stakers[i];
            uint balance = stakingBalance[recipient];
            if(balance > 0){
                dappToken.transfer(recipient, balance);
            }
        }
    }

    //ã€€3.ã‚¢ãƒ³ã‚¹ãƒ†ãƒ¼ã‚­ãƒ³ã‚°æ©Ÿèƒ½
    // * æŠ•è³‡å®¶ã¯ã€é ã‘å…¥ã‚ŒãŸ Dai ã‚’å¼•ãå‡ºã™ã“ã¨ãŒã§ãã‚‹
    function unstakeTokens(uint _amount) public {
        // æŠ•è³‡å®¶ãŒã‚¹ãƒ†ãƒ¼ã‚­ãƒ³ã‚°ã—ãŸé‡‘é¡ã‚’å–å¾—ã™ã‚‹
        uint balance = stakingBalance[msg.sender];
        // æŠ•è³‡å®¶ãŒã‚¹ãƒ†ãƒ¼ã‚­ãƒ³ã‚°ã—ãŸé‡‘é¡ãŒ0ä»¥ä¸Šã§ã‚ã‚‹ã“ã¨ã‚’ç¢ºèªã™ã‚‹
        require(balance > _amount, "staking balance should be more than unstaked amount");
        // å½ã® Dai ãƒˆãƒ¼ã‚¯ãƒ³ã‚’æŠ•è³‡å®¶ã«è¿”é‡‘ã™ã‚‹
        daiToken.transfer(msg.sender, _amount);
        // è¿”é‡‘ã—ãŸåˆ†ã®dappTokenã‚’åˆ©å­ã¨ã—ã¦ä»˜ä¸ã™ã‚‹
        dappToken.transfer(msg.sender, _amount);
        // æŠ•è³‡å®¶ã®ã‚¹ãƒ†ãƒ¼ã‚­ãƒ³ã‚°æ®‹é«˜ã‚’0ã«æ›´æ–°ã™ã‚‹
        stakingBalance[msg.sender] = balance - _amount;
        // æŠ•è³‡å®¶ã®ã‚¹ãƒ†ãƒ¼ã‚­ãƒ³ã‚°çŠ¶æ…‹ã‚’æ›´æ–°ã™ã‚‹
        isStaking[msg.sender] = false;
    }
}
```

ä»¥ä¸Šã§ã€`TokenFarm.sol`ã«Yield Farmingã‚’å®Ÿè£…ã™ã‚‹ä¸Šã§å¿…è¦ãªæ©Ÿèƒ½ãŒå…¨ã¦å‚™ã‚ã‚Šã¾ã—ãŸ!

### ğŸ™‹â€â™‚ï¸ è³ªå•ã™ã‚‹

ã“ã“ã¾ã§ã®ä½œæ¥­ã§ä½•ã‹ã‚ã‹ã‚‰ãªã„ã“ã¨ãŒã‚ã‚‹å ´åˆã¯ã€Discordã®`#ethereum`ã§è³ªå•ã‚’ã—ã¦ãã ã•ã„ã€‚

ãƒ˜ãƒ«ãƒ—ã‚’ã™ã‚‹ã¨ãã®ãƒ•ãƒ­ãƒ¼ãŒå††æ»‘ã«ãªã‚‹ã®ã§ã€ã‚¨ãƒ©ãƒ¼ãƒ¬ãƒãƒ¼ãƒˆã«ã¯ä¸‹è¨˜ã®3ç‚¹ã‚’è¨˜è¼‰ã—ã¦ãã ã•ã„ âœ¨

```
1. è³ªå•ãŒé–¢é€£ã—ã¦ã„ã‚‹ã‚»ã‚¯ã‚·ãƒ§ãƒ³ç•ªå·ã¨ãƒ¬ãƒƒã‚¹ãƒ³ç•ªå·
2. ä½•ã‚’ã—ã‚ˆã†ã¨ã—ã¦ã„ãŸã‹
3. ã‚¨ãƒ©ãƒ¼æ–‡ã‚’ã‚³ãƒ”ãƒ¼&ãƒšãƒ¼ã‚¹ãƒˆ
4. ã‚¨ãƒ©ãƒ¼ç”»é¢ã®ã‚¹ã‚¯ãƒªãƒ¼ãƒ³ã‚·ãƒ§ãƒƒãƒˆ
```

---
ã“ã“ã¾ã§ã§ã‚¹ãƒ†ãƒ¼ã‚­ãƒ³ã‚°ã®å®Ÿè£…ã¯å®Œæˆã—ã¾ã—ãŸã­!

æ¬¡ã®ãƒ¬ãƒƒã‚¹ãƒ³ã§ã¯ã‚¹ãƒ†ãƒ¼ã‚­ãƒ³ã‚°ã—ãŸãƒˆãƒ¼ã‚¯ãƒ³ã«å¯¾ã—ã¦å ±é…¬ã¨ã—ã¦ã‚³ãƒŸãƒ¥ãƒ‹ãƒ†ã‚£ã®ãƒˆãƒ¼ã‚¯ãƒ³ã‚’æä¾›ã™ã‚‹æ©Ÿèƒ½ã¨ã€ã‚¹ãƒ†ãƒ¼ã‚­ãƒ³ã‚°ã—ãŸãƒˆãƒ¼ã‚¯ãƒ³ã‚’è‡ªåˆ†ã®æ‰‹å…ƒã«æˆ»ã™æ©Ÿèƒ½ã®å®Ÿè£…ã«å…¥ã£ã¦ãƒãƒƒã‚¯ã‚¨ãƒ³ãƒ‰ã¯å®Œæˆã™ã‚‹ã®ã§å¾Œä¸€è¸ã‚“å¼µã‚Šé ‘å¼µã£ã¦ã„ãã¾ã—ã‚‡ã†!
