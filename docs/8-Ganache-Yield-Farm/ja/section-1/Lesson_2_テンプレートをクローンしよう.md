###  ğŸ–¥ ã“ã®ãƒ¬ãƒƒã‚¹ãƒ³ã®å‚è€ƒå‹•ç”»URL
[Dapp University](https://youtu.be/CgXQC4dbGUE?t=473)

### ğŸ½ ãƒ†ãƒ³ãƒ—ãƒ¬ãƒ¼ãƒˆã‚’ã‚ãªãŸã® GitHub ã«ãƒ•ã‚©ãƒ¼ã‚¯ã™ã‚‹

ã“ã®ã‚»ã‚¯ã‚·ãƒ§ãƒ³ã§ã¯ã€Web ã‚µã‚¤ãƒˆã®æ§‹ç¯‰ã‚’é€šã—ã¦ã€ãƒ•ãƒ­ãƒ³ãƒˆã‚¨ãƒ³ãƒ‰ãŒã‚¹ãƒãƒ¼ãƒˆã‚³ãƒ³ãƒˆãƒ©ã‚¯ãƒˆã¨ã©ã®ã‚ˆã†ã«é–¢é€£ã™ã‚‹ã®ã‹å­¦ã³ã¾ã™ã€‚

ã¾ãšã€ã‚¿ãƒ¼ãƒŸãƒŠãƒ«ã«å‘ã‹ã„ã¾ã—ã‚‡ã†ã€‚

ä½œæ¥­ã—ãŸã„ãƒ‡ã‚£ãƒ¬ã‚¯ãƒˆãƒªã«ç§»å‹•ã—ãŸã‚‰ã€æ¬¡ã®ã‚³ãƒãƒ³ãƒ‰ã‚’å®Ÿè¡Œã—ã¾ã™ã€‚

```bash
mkdir Yield-Farm
cd Yield-Farm
```

æ¬¡ã«ãƒ†ãƒ³ãƒ—ãƒ¬ãƒ¼ãƒˆã‚’ãƒ•ã‚©ãƒ¼ã‚¯ã—ãŸã®ã¡ã«ã€ãã‚Œã‚’ãƒ­ãƒ¼ã‚«ãƒ«ç’°å¢ƒã«ã‚¯ãƒ­ãƒ¼ãƒ³ã—ã¾ã™ã€‚

ã¾ã  GitHub ã®ã‚¢ã‚«ã‚¦ãƒ³ãƒˆã‚’ãŠæŒã¡ã§ãªã„æ–¹ã¯ã€[ã“ã¡ã‚‰](https://qiita.com/okumurakengo/items/848f7177765cf25fcde0) ã®æ‰‹é †ã«æ²¿ã£ã¦ã‚¢ã‚«ã‚¦ãƒ³ãƒˆã‚’ä½œæˆã—ã¦ãã ã•ã„ã€‚

GitHub ã®ã‚¢ã‚«ã‚¦ãƒ³ãƒˆã‚’ãŠæŒã¡ã®æ–¹ã¯ã€[ã“ã¡ã‚‰](https://github.com/shiftbase-xyz/yield-farm-starter-project) ã‹ã‚‰ã€ãƒ†ãƒ³ãƒ—ãƒ¬ãƒ¼ãƒˆã§ã‚ã‚‹ `yield-farm-starter-project` ã‚’ã‚ãªãŸã® GitHub ã«ãƒ•ã‚©ãƒ¼ã‚¯ã—ã¾ã—ã‚‡ã†ã€‚

ãƒ•ã‚©ãƒ¼ã‚¯ã®æ–¹æ³•ã¯ã€[ã“ã¡ã‚‰](https://docs.github.com/ja/get-started/quickstart/fork-a-repo) ã‚’å‚ç…§ã—ã¦ãã ã•ã„ã€‚

ã”è‡ªèº«ã® GitHub ã‚¢ã‚«ã‚¦ãƒ³ãƒˆã«ãƒ•ã‚©ãƒ¼ã‚¯ã—ãŸ `yield-farm-starter-project` ãƒªãƒã‚¸ãƒˆãƒªã‚’ã‚ãªãŸã®ãƒ­ãƒ¼ã‚«ãƒ«ç’°å¢ƒã«ã‚¯ãƒ­ãƒ¼ãƒ³ã—ã¾ã—ã‚‡ã†ã€‚

ä¸‹å›³ã®ã‚ˆã†ã«ã€`Code` ãƒœã‚¿ãƒ³ã‚’ã‚¯ãƒªãƒƒã‚¯ã—ãŸå¾Œã€`SSH` ã‚’é¸æŠã—ã€Git ãƒªãƒ³ã‚¯ã‚’ã‚³ãƒ”ãƒ¼ã—ã¾ã—ã‚‡ã†ã€‚

![](/public/images/1-ETH-dApp/section-2/2_1_1.png)

> âœï¸: SSH ã®è¨­å®šã‚’è¡Œã†
>
> Github ã®ãƒ¬ãƒã‚¸ãƒˆãƒªã‚’ã‚¯ãƒ­ãƒ¼ãƒ³ã™ã‚‹éš›ã«ã€SSHKey ã‚’ä½œæˆã—ã€GitHub ã«å…¬é–‹éµã‚’ç™»éŒ²ã™ã‚‹å¿…è¦ãŒã‚ã‚Šã¾ã™ã€‚
>
> SSHï¼ˆSecure SHellï¼‰ã¯ãƒãƒƒãƒˆãƒ¯ãƒ¼ã‚¯ã‚’çµŒç”±ã—ã¦ãƒã‚·ãƒ³ã‚’é éš”æ“ä½œã™ã‚‹ä»•çµ„ã¿ã®ã“ã¨ã§ã€é€šä¿¡ãŒæš—å·åŒ–ã•ã‚Œã¦ã„ã‚‹ã®ãŒç‰¹å¾´çš„ã§ã™ã€‚
>
> ä¸»ã«ã‚¯ãƒ©ã‚¤ã‚¢ãƒ³ãƒˆï¼ˆãƒ­ãƒ¼ã‚«ãƒ«ï¼‰ã‹ã‚‰ã‚µãƒ¼ãƒãƒ¼ï¼ˆãƒªãƒ¢ãƒ¼ãƒˆï¼‰ã«æ¥ç¶šã‚’ã™ã‚‹ã¨ãã«ä½¿ã‚ã‚Œã¾ã™ã€‚ã“ã® SSH ã®æš—å·åŒ–ã«ã¤ã„ã¦ã€ä»•çµ„ã¿ã‚’è¦‹ã¦ã„ãä¸Šã§é‡è¦ã«ãªã‚‹ã®ãŒç§˜å¯†éµã¨å…¬é–‹éµã§ã™ã€‚
>
> ã¾ãšã¯ã‚¯ãƒ©ã‚¤ã‚¢ãƒ³ãƒˆã®ãƒã‚·ãƒ³ã§ç§˜å¯†éµã¨å…¬é–‹éµã‚’ä½œã‚Šã€å…¬é–‹éµã‚’ã‚µãƒ¼ãƒãƒ¼ã«æ¸¡ã—ã¾ã™ã€‚ãã—ã¦ã‚µãƒ¼ãƒãƒ¼å´ã§ã€Œã“ã®å…¬é–‹éµã¯ã“ã®ãƒ¦ãƒ¼ã‚¶ãƒ¼ã€ã¨ã„ã†ã‚ˆã†ã«ã€ç´ä»˜ã‘ã‚’è¡Œã£ã¦ã„ãã¾ã™ã€‚
>
> è‡ªåˆ†ã§ç®¡ç†ã—ã¦å¿…ãšè¦‹ã›ã¦ã¯ã„ã‘ãªã„ç§˜å¯†éµã¨ã€ã‚µãƒ¼ãƒãƒ¼ã«æ¸¡ã—ã¦è¦‹ã›ã¦ã‚‚è‰¯ã„å…¬é–‹éµã® 2 ã¤ãŒ SSH ã®é€šä¿¡ã§ã¯é‡è¦ã«ãªã£ã¦ãã¾ã™ã€‚
> Github ã«ãŠã‘ã‚‹ SSH ã®è¨­å®šã¯ã€[ã“ã¡ã‚‰](https://docs.github.com/ja/authentication/connecting-to-github-with-ssh) ã‚’å‚ç…§ã—ã¦ãã ã•ã„!
ã‚¿ãƒ¼ãƒŸãƒŠãƒ«ã§å…ˆã»ã©ä½œæˆã—ãŸ `yield-farm-starter-project` ãƒ‡ã‚£ãƒ¬ã‚¯ãƒˆãƒªã«ç§»å‹•ã—ã€å…ˆã»ã©ã‚³ãƒ”ãƒ¼ã—ãŸãƒªãƒ³ã‚¯ã‚’è²¼ã‚Šä»˜ã‘ã€ä¸‹è¨˜ã‚’å®Ÿè¡Œã—ã¦ãã ã•ã„ã€‚

```bash
git clone ã‚³ãƒ”ãƒ¼ã—ãŸ_github_ãƒªãƒ³ã‚¯
```

ã“ã®æ®µéšã§ã€ãƒ•ã‚©ãƒ«ãƒ€æ§‹é€ ã¯ä¸‹è¨˜ã®ã‚ˆã†ã«ãªã£ã¦ã„ã‚‹ã¯ãšã§ã™ã€‚

```
Yield-Farm
   |_ yield-farm-starter-project
```

ã‚¿ãƒ¼ãƒŸãƒŠãƒ«ä¸Šã§ `yield-farm-starter-project` ã«ç§»å‹•ã—ã¦ä¸‹è¨˜ã‚’å®Ÿè¡Œã—ã¾ã—ã‚‡ã†ã€‚

```bash
npm install
```

`npm` ã‚³ãƒãƒ³ãƒ‰ã‚’å®Ÿè¡Œã™ã‚‹ã“ã¨ã§ã€JavaScript ãƒ©ã‚¤ãƒ–ãƒ©ãƒªã®ã‚¤ãƒ³ã‚¹ãƒˆãƒ¼ãƒ«ãŒè¡Œã‚ã‚Œã¾ã™ã€‚

### ğŸ’» ãƒãƒƒãƒˆãƒ¯ãƒ¼ã‚¯æƒ…å ±ã®ç·¨é›†

ãƒ†ãƒ³ãƒ—ãƒ¬ãƒ¼ãƒˆãƒ•ã‚¡ã‚¤ãƒ«ã®ä¸­ã«ã‚ã‚‹`truffle-config.js`ã¨ã„ã†ãƒ•ã‚¡ã‚¤ãƒ«ã‚’è¦‹ã¦ã¿ã¾ã—ã‚‡ã†ã€‚ã“ã“ã«ã¯ãƒ†ã‚¹ãƒˆã«ä½¿ã†Ganacheã®æƒ…å ±ã‚’æ‰“ã¡è¾¼ã‚€å¿…è¦ãŒã‚ã‚Šã¾ã™ã€‚

ä¸‹ã®Ganacheã®ç”»åƒã® `NETWORK ID` ã¨æ›¸ã„ã¦ã‚ã‚‹éƒ¨åˆ†ã®ï¼”æ¡ã®æ•°å­—ã‚’`truffle.config.js` ã® `network_id` ã¨ã„ã†ã¨ã“ã‚ã«æ‰“ã¡è¾¼ã‚“ã§ãã ã•ã„ã€‚

![](/public/images/8-Ganache-Yield-Farm/section-1/12_1_2.png)
![](/public/images/8-Ganache-Yield-Farm/section-1/12_1_3.png)

ã“ã‚Œã§ Ganache ã®ãƒãƒƒãƒˆãƒ¯ãƒ¼ã‚¯ã‚’ä½¿ã£ã¦ãƒ†ã‚¹ãƒˆãŒã§ãã‚‹ã‚ˆã†ã«ãªã‚Šã¾ã—ãŸï¼

### ğŸ‘€ `contracts` ãƒ•ã‚©ãƒ«ãƒ€ã®ä¸­èº«ã®ç¢ºèªã™ã‚‹

æ¬¡ã« `scr/contracts` ã«ã‚ã‚‹ã‚¹ãƒãƒ¼ãƒˆã‚³ãƒ³ãƒˆãƒ©ã‚¯ãƒˆã®ã‚³ãƒ¼ãƒ‰ãŒæ›¸ã‹ã‚Œã¦ã„ã‚‹ãƒ•ã‚¡ã‚¤ãƒ«ã®ç¢ºèªã‚’è¡Œã„ã¾ã—ã‚‡ã†ã€‚

ã“ã®ãƒ•ã‚¡ã‚¤ãƒ«ã«ã¯ `MockDaiToken.sol` ã¨ `DappToken.sol` ãŒå«ã¾ã‚Œã¦ã„ã¾ã™ã€‚

ã“ã‚Œã‚‰ã®ãƒ•ã‚¡ã‚¤ãƒ«ã«ã¯ã€ãã‚Œãã‚Œãƒˆãƒ¼ã‚¯ãƒ³ã®ã‚³ãƒ¼ãƒ‰ãŒå«ã¾ã‚Œã¦ã„ã¾ã™ã€‚MockDaiãƒˆãƒ¼ã‚¯ãƒ³ã¯ã€Astarã‚„Linkãªã©ã€æ—¢å­˜ã®ä»®æƒ³é€šè²¨ã‚’æ¨¡ã—ãŸãƒˆãƒ¼ã‚¯ãƒ³ã§ã™ã€‚

ä¸€æ–¹ã€Dappãƒˆãƒ¼ã‚¯ãƒ³ã¯ã€ãƒ¦ãƒ¼ã‚¶ãƒ¼ãŒã‚¹ãƒ†ãƒ¼ã‚¯ã—ãŸã‚³ã‚¤ãƒ³ã‚„ãƒˆãƒ¼ã‚¯ãƒ³ã«å¯¾ã—ã¦ä»˜ä¸ã•ã‚Œã‚‹ã‚³ãƒŸãƒ¥ãƒ‹ãƒ†ã‚£ãƒ»ãƒˆãƒ¼ã‚¯ãƒ³ã‚’è¡¨ã—ã¾ã™ã€‚
### ğŸª™ ERC-20ãƒˆãƒ¼ã‚¯ãƒ³ã®ã—ãã¿

ERC-20ã¯ã€ã‚¤ãƒ¼ã‚µãƒªã‚¢ãƒ ãƒˆãƒ¼ã‚¯ãƒ³ã®æ§‹ç¯‰æ–¹æ³•ã«é–¢ã™ã‚‹APIä»•æ§˜ã§ã™ã€‚ã“ã‚Œã¯ã€ãƒˆãƒ¼ã‚¯ãƒ³ã‚’æ§˜ã€…ãªãƒ¦ãƒ¼ã‚¹ã‚±ãƒ¼ã‚¹ã§ã‚µãƒãƒ¼ãƒˆã§ãã‚‹ã‚ˆã†ã«ã™ã‚‹ãŸã‚ã«ã€Ethereumã‚³ãƒŸãƒ¥ãƒ‹ãƒ†ã‚£ã«ã‚ˆã£ã¦æ¡ç”¨ã•ã‚ŒãŸè¦æ ¼ã§ã™ã€‚

ERC-20è¦æ ¼ã«é–¢ã™ã‚‹è©³ã—ã„èª¬æ˜ã¯[ã“ã¡ã‚‰](https://github.com/ethereum/EIPs/blob/master/EIPS/eip-20.md)ã‚’ã”è¦§ãã ã•ã„ã€‚

ã“ã®è¦æ ¼ã«æº–æ‹ ã—ãŸãƒˆãƒ¼ã‚¯ãƒ³ã‚’ `MockDaiToken.sol` ã¨ `DappToken.sol` ã§ä½œæˆã™ã‚‹ã“ã¨ã«ãªã‚Šã¾ã™ã€‚

ERC-20ãƒˆãƒ¼ã‚¯ãƒ³ã®å ´åˆã€ã‚¹ãƒãƒ¼ãƒˆã‚³ãƒ³ãƒˆãƒ©ã‚¯ãƒˆã¯ãƒˆãƒ¼ã‚¯ãƒ³ã®æ“ä½œã«é–¢é€£ã™ã‚‹ã™ã¹ã¦ã®ã‚¢ã‚¯ã‚·ãƒ§ãƒ³ã‚’ç®¡ç†ã—ã€ãƒˆãƒ¼ã‚¯ãƒ³ã®æ‰€æœ‰æ¨©ã¨å£åº§æ®‹é«˜ã‚’è¿½è·¡ã—ã¾ã™ã€‚

ERC-20æ¨™æº–è¦æ ¼ã‚’ä½¿ç”¨ã™ã‚‹ã“ã¨ã§ã€ãƒˆãƒ¼ã‚¯ãƒ³ã¯ä»¥ä¸‹ã®ãƒ¦ãƒ¼ã‚¹ã‚±ãƒ¼ã‚¹ã«æº–æ‹ ã™ã‚‹ã“ã¨ãŒä¿è¨¼ã•ã‚Œã¾ã™ã€‚

- ã‚¦ã‚©ãƒ¬ãƒƒãƒˆé–“ã®ãƒˆãƒ©ãƒ³ã‚¹ãƒ•ã‚¡ãƒ¼ï¼ˆã‚ã‚‹ã‚¢ã‚«ã‚¦ãƒ³ãƒˆã‹ã‚‰åˆ¥ã®ã‚¢ã‚«ã‚¦ãƒ³ãƒˆã¸ã®ãƒˆãƒ¼ã‚¯ãƒ³ã®é€ä¿¡ï¼‰
- æš—å·é€šè²¨å–å¼•æ‰€ã§ã®å£²è²·
- ã‚¯ãƒ©ã‚¦ãƒ‰ã‚»ãƒ¼ãƒ«ï¼ˆICOï¼‰ã§ã®ãƒˆãƒ¼ã‚¯ãƒ³ã®è³¼å…¥

### ğŸ§ª `DappToken.sol` ã‚’æ·±ã¼ã‚‹

`DappToken.sol` ã¨ `MockDaiToken.sol` ã«è¨˜è¿°ã•ã‚Œã¦ã„ã‚‹æ©Ÿèƒ½ã¯ã»ã¼åŒã˜ã§ã™ã€‚

ç°¡å˜ã®ãŸã‚ã«ã€ERC-20è¦æ ¼ã«æº–æ‹ ã—ãŸæ©Ÿèƒ½ã‚’ç†è§£ã™ã‚‹ãŸã‚ã«ã€`DappToken.sol` ã®å†…å®¹ã‚’è¦‹ã¦ã¿ã¾ã—ã‚‡ã†ã€‚

ã¾ãšã€`DappToken.sol` ã®4-10è¡Œç›®ã«æ³¨ç›®ã—ã¦ãã ã•ã„ã€‚

```javascript
// DappToken.sol
// ãƒˆãƒ¼ã‚¯ãƒ³åã‚’æ ¼ç´
string  public name = "DApp Token";
// æš—å·é€šè²¨äº¤æ›ç”¨ã®ãƒˆãƒ¼ã‚¯ãƒ³ã‚·ãƒ³ãƒœãƒ«ã‚’æ ¼ç´
string  public symbol = "DAPP";
// å­˜åœ¨ã™ã‚‹ãƒˆãƒ¼ã‚¯ãƒ³ã®ç·ä¾›çµ¦é‡ã‚’æ ¼ç´
uint256 public totalSupply = 1000000000000000000000000; // 1 million tokensã‚’ä¾›çµ¦
uint8   public decimals = 18;    // ãƒˆãƒ¼ã‚¯ãƒ³åã‚’æ ¼ç´
string  public name = "DApp Token";
// æš—å·é€šè²¨äº¤æ›ç”¨ã®ãƒˆãƒ¼ã‚¯ãƒ³ã‚·ãƒ³ãƒœãƒ«ã‚’æ ¼ç´
string  public symbol = "DAPP";
// å­˜åœ¨ã™ã‚‹ãƒˆãƒ¼ã‚¯ãƒ³ã®ç·ä¾›çµ¦é‡ã‚’æ ¼ç´
// 1 million tokensã‚’ä¾›çµ¦
uint256 public totalSupply = 1000000000000000000000000;
uint8   public decimals = 18;
```

ã“ã“ã§ã¯ã€`DappToken.sol` ã§ä½¿ç”¨ã™ã‚‹å¤‰æ•°ã‚’å®šç¾©ã—ã€å€¤ã‚’æ ¼ç´ã—ã¦ã„ã¾ã™ã€‚

æ¬¡ã«ã€25è¡Œç›®ã‚’è¦‹ã¦ã„ãã¾ã—ã‚‡ã†ã€‚
```javascript
// DappToken.sol
mapping(address => uint256) public balanceOf;
```

ã“ã® `balanceOf` ã¨ã„ã†ãƒãƒƒãƒ”ãƒ³ã‚°ã¯ã€ã€ŒKey ãŒ `address` ã§ Value ãŒ `uint256` ã€ã¨ã„ã†è§£é‡ˆã‚’ã—ã¾ã™ã€‚

`balanceOf` ã¯ã€å®Ÿéš›ã®ãƒ¦ãƒ¼ã‚¶ãƒ¼ã® `address` ã‚’å¼•æ•°ã«ã€ãã®ãƒ¦ãƒ¼ã‚¶ãƒ¼ã‚¢ãƒ‰ãƒ¬ã‚¹ã®æ®‹é«˜ (ãƒãƒ©ãƒ³ã‚¹) ã‚’è¿”ã—ã¾ã™ã€‚

ãã—ã¦ã€ã“ã®ãƒãƒƒãƒ”ãƒ³ã‚°ã¯ `public` ãªã®ã§ã€ã‚³ãƒ³ãƒˆãƒ©ã‚¯ãƒˆã®å¤–ã‹ã‚‰å‘¼ã³å‡ºã™ã“ã¨ãŒã§ãã¾ã™ã€‚

**1ï¸âƒ£ `transfer`**

æ¬¡ã«ã€`transfer` é–¢æ•°ï¼ˆ `DappToken.sol` ã®31-38è¡Œï¼‰ã‚’è¦‹ã¦ã„ãã¾ã—ã‚‡ã†ã€‚

```javascript
// DappToken.sol
// ãƒ¦ãƒ¼ã‚¶ãƒ¼ãŒãƒˆãƒ¼ã‚¯ãƒ³ã‚’åˆ¥ã®ã‚¢ã‚«ã‚¦ãƒ³ãƒˆã«é€ä¿¡ã§ãã‚‹ã‚ˆã†ã«ã™ã‚‹æ©Ÿèƒ½ã‚’å®Ÿè£…
function transfer(address _to, uint256 _value) public returns (bool success) {
   // ç§»å‹•ã—ãŸã„é¡ã®ãƒˆãƒ¼ã‚¯ãƒ³ãŒãƒ¦ãƒ¼ã‚¶ãƒ¼ã®ã‚¢ãƒ‰ãƒ¬ã‚¹ã«å­˜åœ¨ã™ã‚‹ã‹ç¢ºèª
   // å­˜åœ¨ã—ãªã„å ´åˆã¯ã€ã‚¨ãƒ©ãƒ¼ã‚’è¿”ã™
   require(balanceOf[msg.sender] >= _value);
   // é–¢æ•°ã‚’å‘¼ã³å‡ºã—ãŸãƒ¦ãƒ¼ã‚¶ãƒ¼ã‚¢ãƒ‰ãƒ¬ã‚¹ã‹ã‚‰ _value ã®é‡‘é¡ã‚’å¼•ãæŠœã
   balanceOf[msg.sender] -= _value;
   // é€é‡‘å…ˆã®ã‚¢ãƒ‰ãƒ¬ã‚¹ã« _value ã®é‡‘é¡ã‚’è¶³ã™
   balanceOf[_to] += _value;
   // Transferã‚¤ãƒ™ãƒ³ãƒˆã‚’å®Ÿè¡Œã™ã‚‹
   emit Transfer(msg.sender, _to, _value);
   return true;
}
```

`transfer` é–¢æ•°ã¯ã€ã‚ã‚‹ã‚¢ãƒ‰ãƒ¬ã‚¹ï¼ˆ `_from` ï¼‰ã‹ã‚‰åˆ¥ã®ã‚¢ãƒ‰ãƒ¬ã‚¹ï¼ˆ `_to` ï¼‰ã¸ã€ã‚ã‚‹é‡ã®ãƒˆãƒ¼ã‚¯ãƒ³ï¼ˆ `_value` ï¼‰ã‚’è»¢é€ã™ã‚‹é–¢æ•°ã§ã™ã€‚ãã®éš›ã«ã€å¿…ãšã€ `Transfer` ã‚¤ãƒ™ãƒ³ãƒˆã‚’ç™ºç”Ÿã•ã›ãªã‘ã‚Œã°ã„ã‘ã¾ã›ã‚“ã€‚

`Transfer` ã‚¤ãƒ™ãƒ³ãƒˆã‚’ç™ºç”Ÿã•ã›ã‚‹ãŸã‚ã«ã€`DappToken.sol` ã®12-16è¡Œç›®ã«ä»¥ä¸‹ã® `event` ãŒå®šç¾©ã•ã‚Œã¦ã„ã¾ã™ã€‚

```javascript
// DappToken.sol
event Transfer(
   address indexed _from,
   address indexed _to,
   uint256 _value
);
```
`Transfer` ã‚¤ãƒ™ãƒ³ãƒˆã«ã¯ä»¥ä¸‹ã®å¤‰æ•°ãŒå¿…è¦ã«ãªã‚Šã¾ã™ã€‚
- `_from`: ãƒˆãƒ¼ã‚¯ãƒ³ã‚’é€ã‚‹äººã®ã‚¢ãƒ‰ãƒ¬ã‚¹
- `_to`: ãƒˆãƒ¼ã‚¯ãƒ³ãŒé€ã‚‹ã‚‰ã‚Œã‚‹äººã®ã‚¢ãƒ‰ãƒ¬ã‚¹
- `_value`: é€ã‚‰ã‚Œã‚‹ãƒˆãƒ¼ã‚¯ãƒ³ã®é‡‘é¡

ãƒˆãƒ¼ã‚¯ãƒ³ãŒãƒ”ã‚¢ãƒ„ãƒ¼ãƒ”ã‚¢ã§è»¢é€ã•ã‚Œã‚‹ã¨ãã¯ã€å¿…ãš `Transfer` ã‚¤ãƒ™ãƒ³ãƒˆã‚’ç™ºç”Ÿã•ã›ã‚‹å¿…è¦ãŒã‚ã‚Šã¾ã™ã€‚æ–°ã—ã„ãƒˆãƒ¼ã‚¯ãƒ³ã‚’ä½œæˆã™ã‚‹éš›ã«ã¯ã€ `_from` ã‚¢ãƒ‰ãƒ¬ã‚¹ã‚’ `0x0` ã«è¨­å®šã—ã¦ã€ `Transfer` ã‚¤ãƒ™ãƒ³ãƒˆã‚’ç™ºç”Ÿã•ã›ã‚‹ã‚ˆã†ã«ã—ã¾ã™ã€‚

**2ï¸âƒ£ `approve`**

æ¬¡ã«ã€`approve` é–¢æ•°ã‚’è¦‹ã¦ã„ãã¾ã—ã‚‡ã†ã€‚

ã¾ãšã€`allowance` ãƒãƒƒãƒ”ãƒ³ã‚°ï¼ˆ `DappToken.sol` ã®26è¡Œç›®ï¼‰ã«ç€ç›®ã—ã¦ãã ã•ã„ã€‚

```javascript
mapping(address => mapping(address => uint256)) public allowance;
```

`allowance` ãƒãƒƒãƒ”ãƒ³ã‚°ã¯ãƒã‚¹ãƒˆã•ã‚ŒãŸãƒãƒƒãƒ”ãƒ³ã‚°ã®å½¢ã‚’ã¨ã£ã¦ã„ã¾ã™ãŒã€è‡³ã£ã¦ç°¡å˜ãªã‚³ãƒ³ã‚»ãƒ—ãƒˆã§ã™ã€‚ä»¥ä¸‹ã‚’è¦‹ã¦ã„ãã¾ã—ã‚‡ã†ã€‚

```javascript
mapping(address => mapping(address => uint256)) public allowance;
          (1)                (2)        (3)
```

ã¾ãšã€(1)-(3)ã®å¤‰æ•°ã®æ„å‘³ã‚’è¦‹ã¦ã„ãã¾ã—ã‚‡ã†ã€‚

- `(1)`: ã‚³ãƒ³ãƒˆãƒ©ã‚¯ãƒˆã‚ªãƒ¼ãƒŠãƒ¼( `owner` ï¼‰ã®ã‚¢ãƒ‰ãƒ¬ã‚¹
- `(2)`: `spender`ï¼ˆä»»æ„ã®ãƒ¦ãƒ¼ã‚¶ãƒ¼ï¼‰ã®ã‚¢ãƒ‰ãƒ¬ã‚¹
- `(3)`: `spender` ãŒå¼•ãå‡ºã™ã“ã¨ãŒã§ãã‚‹é‡‘é¡ï¼ˆ `_value` ï¼‰

`allowance` ãƒãƒƒãƒ”ãƒ³ã‚°ã¯ `(1)` ã® `owner` ã®ã‚¢ãƒ‰ãƒ¬ã‚¹ã‚’ Key ã¨ã—ã¦ã€ãã®ã‚³ãƒ³ãƒˆãƒ©ã‚¯ãƒˆã‚’å©ã„ãŸãƒ¦ãƒ¼ã‚¶ãƒ¼ ( `spender` ) ãŒå¼•ãå‡ºã™ã“ã¨ã®ã§ãã‚‹é‡‘é¡ ( `_value` ) ã‚’è¿”ã™ãƒãƒƒãƒ”ãƒ³ã‚°ã§ã™ã€‚

æ¬¡ã«ã€`approve` é–¢æ•°ï¼ˆ`DappToken.sol` ã®41-45è¡Œç›®ï¼‰ã‚’è¦‹ã¦ã„ãã¾ã—ã‚‡ã†ã€‚

```javascript
// DappToken.sol
// åˆ¥ã®ã‚¢ã‚«ã‚¦ãƒ³ãƒˆãŒãƒˆãƒ¼ã‚¯ãƒ³ã‚’ä½¿ç”¨ã§ãã‚‹ã‚ˆã†ã«ã™ã‚‹æ©Ÿèƒ½ã‚’å®Ÿè£…
function approve(address _spender, uint256 _value) public returns (bool success) {
   allowance[msg.sender][_spender] = _value;
   emit Approval(msg.sender, _spender, _value);
   return true;
}
```
`approve` é–¢æ•°ã¯ã€ä»»æ„ã®ãƒ¦ãƒ¼ã‚¶ãƒ¼( `spender` )ãŒä¸€å®šé‡( `_value` )ã®ãƒˆãƒ¼ã‚¯ãƒ³ã‚’ç¹°ã‚Šè¿”ã—å¼•ãå‡ºã›ã‚‹ã‚ˆã†ã«ã™ã‚‹é–¢æ•°ã§ã™ã€‚ã“ã®é–¢æ•°ãŒå†ã³å‘¼ã³å‡ºã•ã‚ŒãŸå ´åˆã€ç¾åœ¨å¼•ãå‡ºã—å¯èƒ½ãªé‡‘é¡ã¯æ–°ã—ã„ `_value` å€¤ã§ä¸Šæ›¸ãã•ã‚Œã¾ã™ã€‚

æ¬¡ã«ã€26è¡Œç›®ã§å®šç¾©ã—ãŸ `allowance` ãƒãƒƒãƒ”ãƒ³ã‚°ãŒ `approve` é–¢æ•°ã®ä¸­ã§å‘¼ã³å‡ºã•ã‚Œã¦ã„ã‚‹ã“ã¨ã‚’ç¢ºèªã—ã¾ã—ã‚‡ã†ã€‚

```javascript
// DappToken.sol
allowance[msg.sender][_spender] = _value;
```

ã“ã“ã§ã¯ `_spender`ï¼ˆä»»æ„ã®ãƒ¦ãƒ¼ã‚¶ãƒ¼ï¼‰ãŒ `msg.sender`ï¼ˆã‚³ãƒ³ãƒˆãƒ©ã‚¯ãƒˆã®ã‚ªãƒ¼ãƒŠãƒ¼ãƒ¦ãƒ¼ã‚¶ãƒ¼ï¼‰ã‹ã‚‰ã¾ã å¼•ãå‡ºã™ã“ã¨ãŒã§ãã‚‹é‡‘é¡ï¼ˆ `_value` ï¼‰ã‚’è¨­å®šã—ã¦ã„ã¾ã™ã€‚

æœ€å¾Œã«ã€`Approval` ã‚¤ãƒ™ãƒ³ãƒˆã‚’ç™ºç”Ÿã•ã›ã¦ã„ã‚‹ã“ã¨ã«ç€ç›®ã—ã¦ãã ã•ã„ã€‚

```javascript
// DappToken.sol
emit Approval(msg.sender, _spender, _value);
```

`Approval` ã‚¤ãƒ™ãƒ³ãƒˆã¯ `approve` é–¢æ•°ã®å‘¼ã³å‡ºã—ã«æˆåŠŸã—ãŸã¨ãã«ç™ºç”Ÿã—ã¾ã™ã€‚

`Approval` ã‚¤ãƒ™ãƒ³ãƒˆã‚’ç™ºç”Ÿã•ã›ã‚‹ãŸã‚ã«ã€`DappToken.sol` ã®18-22è¡Œç›®ã«ä»¥ä¸‹ã® `event` ãŒå®šç¾©ã•ã‚Œã¦ã„ã‚‹ã“ã¨ã‚’ç¢ºèªã—ã¦ãã ã•ã„ã€‚

```javascript
// DappToken.sol
event Approval(
   address indexed _owner,
   address indexed _spender,
   uint256 _value
);
```

**3ï¸âƒ£ `transferFrom`**

æœ€å¾Œã«ã€`DappToken.sol` ã®47-56è¡Œç›®ã«è¨˜è¼‰ã•ã‚Œã¦ã„ã‚‹ `transferFrom` é–¢æ•°ã‚’è¦‹ã¦ã„ãã¾ã—ã‚‡ã†ã€‚

```javascript
// DappToken.sol
// åˆ¥ã®ã‚¢ã‚«ã‚¦ãƒ³ãƒˆã‹ã‚‰ãƒˆãƒ¼ã‚¯ãƒ³ã‚’è»¢é€ã§ãã‚‹ã‚ˆã†ã«ã™ã‚‹
function transferFrom(address _from, address _to, uint256 _value) public returns (bool success) {
   require(_value <= balanceOf[_from]);
   require(_value <= allowance[_from][msg.sender]);
   balanceOf[_from] -= _value;
   balanceOf[_to] += _value;
   allowance[_from][msg.sender] -= _value;
   emit Transfer(_from, _to, _value);
   return true;
}
```

`transferFrom` ã¯ã€`_value` ã®é‡ã®ãƒˆãƒ¼ã‚¯ãƒ³ã‚’ã‚¢ãƒ‰ãƒ¬ã‚¹ `_from` ã‹ã‚‰ã‚¢ãƒ‰ãƒ¬ã‚¹ `_to` ã«è»¢é€ã—ã€`Transfer` ã‚¤ãƒ™ãƒ³ãƒˆã‚’ç™ºç”Ÿã•ã›ã‚‹é–¢æ•°ã§ã™ã€‚

`transferFrom` ã¯ã€ã‚³ãƒ³ãƒˆãƒ©ã‚¯ãƒˆãŒã‚ãªãŸã«ä»£ã‚ã£ã¦ãƒˆãƒ¼ã‚¯ãƒ³ã‚’è»¢é€ã™ã‚‹ã“ã¨ã‚’è¨±å¯ã™ã‚‹ã€ãƒˆãƒ¼ã‚¯ãƒ³å¼•ãå‡ºã—ãƒ¯ãƒ¼ã‚¯ãƒ•ãƒ­ãƒ¼ã«ä½¿ç”¨ã•ã‚Œã¾ã™ã€‚ã“ã‚Œã¯ä¾‹ãˆã°ã€ã‚³ãƒ³ãƒˆãƒ©ã‚¯ãƒˆãŒã‚ãªãŸã«ä»£ã‚ã£ã¦ãƒˆãƒ¼ã‚¯ãƒ³ã‚’è»¢é€ã—ãŸã‚Šã€ã‚µãƒ–é€šè²¨ã§æ‰‹æ•°æ–™ã‚’è«‹æ±‚ã—ãŸã‚Šã™ã‚‹ã“ã¨ã‚’å¯èƒ½ã«ã™ã‚‹ãŸã‚ã«ä½¿ç”¨ã§ãã¾ã™ã€‚

### ğŸ™‹â€â™‚ï¸ è³ªå•ã™ã‚‹

ã“ã“ã¾ã§ã®ä½œæ¥­ã§ä½•ã‹ã‚ã‹ã‚‰ãªã„ã“ã¨ãŒã‚ã‚‹å ´åˆã¯ã€Discord ã® `#section-1` ã§è³ªå•ã‚’ã—ã¦ãã ã•ã„ã€‚

ãƒ˜ãƒ«ãƒ—ã‚’ã™ã‚‹ã¨ãã®ãƒ•ãƒ­ãƒ¼ãŒå††æ»‘ã«ãªã‚‹ã®ã§ã€ã‚¨ãƒ©ãƒ¼ãƒ¬ãƒãƒ¼ãƒˆã«ã¯ä¸‹è¨˜ã® 3 ç‚¹ã‚’è¨˜è¼‰ã—ã¦ãã ã•ã„ âœ¨

```
1. è³ªå•ãŒé–¢é€£ã—ã¦ã„ã‚‹ã‚»ã‚¯ã‚·ãƒ§ãƒ³ç•ªå·ã¨ãƒ¬ãƒƒã‚¹ãƒ³ç•ªå·
2. ä½•ã‚’ã—ã‚ˆã†ã¨ã—ã¦ã„ãŸã‹
3. ã‚¨ãƒ©ãƒ¼æ–‡ã‚’ã‚³ãƒ”ãƒ¼&ãƒšãƒ¼ã‚¹ãƒˆ
4. ã‚¨ãƒ©ãƒ¼ç”»é¢ã®ã‚¹ã‚¯ãƒªãƒ¼ãƒ³ã‚·ãƒ§ãƒƒãƒˆ
```

---
ãƒ†ãƒ³ãƒ—ãƒ¬ãƒ¼ãƒˆã®ã‚¯ãƒ­ãƒ¼ãƒ³æˆåŠŸãŠã‚ã§ã¨ã†ã”ã–ã„ã¾ã™ï¼æ¬¡ã¯ã„ã‚ˆã„ã‚ˆã‚³ãƒ¼ãƒ‡ã‚£ãƒ³ã‚°ã‚’ã—ã¦ã„ãã¾ã—ã‚‡ã†ï¼
