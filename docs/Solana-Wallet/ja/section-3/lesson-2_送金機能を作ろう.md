### é€é‡‘æ©Ÿèƒ½ã«å¿…è¦ãªè¦ä»¶

ã‚¨ã‚¢ãƒ‰ãƒ­ãƒƒãƒ—æ©Ÿèƒ½ãŒå®Œæˆã—ã¾ã—ãŸã®ã§ã€ã‚¦ã‚©ãƒ¬ãƒƒãƒˆã«å…¥ã£ãŸ`SOL`ã®ä½¿ã„é“ã‚’è€ƒãˆã¦ã¿ã¾ã—ã‚‡ã†ã€‚

å®Ÿéš›ã®ã‚¢ãƒ—ãƒªã‚±ãƒ¼ã‚·ãƒ§ãƒ³ã§ã¯ã€`SOL`ã‚’ä»–ã®æš—å·é€šè²¨ã¨äº¤æ›ã—ãŸã‚Šã€å•†å“ã‚„ã‚µãƒ¼ãƒ“ã‚¹ã®ä»£é‡‘ã®æ”¯æ‰•ã„ã«ä½¿ã£ãŸã‚Šã€ã‚ã‚‹ã„ã¯èª°ã‹ã«SOLã‚’è´ˆã£ãŸã‚Šã—ãŸã„ã§ã™ã­ã€‚ãã®ãŸã‚ã«ã¯ã€è‡ªåˆ†ã®ã‚¦ã‚©ãƒ¬ãƒƒãƒˆã‹ã‚‰ä»–ã®ã‚¦ã‚©ãƒ¬ãƒƒãƒˆã«æš—å·é€šè²¨ã‚’é€é‡‘ã™ã‚‹ã‚ˆã†ã€ãƒãƒƒãƒˆãƒ¯ãƒ¼ã‚¯å°å¸³ã«çŸ¥ã‚‰ã›ã‚‹æ–¹æ³•ãŒå¿…è¦ã§ã™ã€‚

é€é‡‘æ©Ÿèƒ½ã‚’ä½œã‚‹ã†ãˆã§å¿…è¦ãªæƒ…å ±ã¯ã¨ã—ã¦ã€é€ã‚Šæ‰‹ã¨å—ã‘æ‰‹ã®2ã¤ã®ã‚¢ãƒ‰ãƒ¬ã‚¹ã‚’å—ã‘å–ã‚‹é–¢æ•°ãŒå¿…è¦ã«ãªã‚Šãã†ã§ã™ã­ã€‚ã¾ãŸã€é€é‡‘ã™ã‚‹`SOL`ã¾ãŸã¯`Lamport`ã®æ•°ã‚‚æƒ…å ±ã¨ã—ã¦å¿…è¦ã¨ãªã‚Šã¾ã™ã€‚

ä¸€æ–¹ã§ã€é‡è¦ãªè¦ç´ ãŒã‚ã‚Šã¾ã™ã€‚ãã‚Œã¯ã€ã‚ãªãŸãŒå®Ÿéš›ã«ãã®æš—å·é€šè²¨ã®æ‰€æœ‰è€…ã§ã‚ã‚Šã€é€é‡‘ã‚’æ‰¿èªã—ã¦ã„ã‚‹ã“ã¨ã‚’ãƒãƒƒãƒˆãƒ¯ãƒ¼ã‚¯ã«è¨¼æ˜ã—ãªã‘ã‚Œã°ãªã‚‰ãªã„ã¨ã„ã†ã“ã¨ã§ã™ã€‚

![](/public/images/Solana-Wallet/section-3/3_2_4.png)

å¤§å®¶ã•ã‚“ã¸å®¶è³ƒã®æ”¯æ‰•ã„ã«ä½¿ã†ã‚ˆã†ãªã€ä¼çµ±çš„ãªç´™ã®å°åˆ‡æ‰‹ã§è€ƒãˆã¦ã¿ã‚‹ã¨ã‚ã‹ã‚Šã‚„ã™ã„ã‹ã‚‚ã—ã‚Œã¾ã›ã‚“ã­ã€‚

å°åˆ‡æ‰‹ã®å·¦ä¸Šã«ã¯ã€ã‚ãªãŸã®åå‰ã¨ä½æ‰€ãŒå°åˆ·ã•ã‚Œã¦ã„ã¾ã™ã€‚ã¾ãŸã€å—å–äººã®åå‰ã‚’è¨˜å…¥ã™ã‚‹æ¬„ãŒã‚ã‚Šã€æ”¯æ‰•é‡‘é¡ã‚’è¨˜å…¥ã™ã‚‹æ¬„ã‚‚ã‚ã‚Šã¾ã™ã€‚æœ€å¾Œã«ã€ã‚ãªãŸãŒé€é‡‘ã‚’æ‰¿èªã—ã¦ã„ã‚‹ã“ã¨ã‚’éŠ€è¡Œã«è¨¼æ˜ã™ã‚‹ãŸã‚ã«ã€å°åˆ‡æ‰‹ã«ç½²åã™ã‚‹æ¬„ãŒã‚ã‚Šã¾ã™ã€‚

ãƒ–ãƒ­ãƒƒã‚¯ãƒã‚§ãƒ¼ãƒ³ã®é€é‡‘ã‚‚ã‹ãªã‚Šä¼¼ã¦ã„ã¾ã™ã€‚ãƒãƒƒãƒˆãƒ¯ãƒ¼ã‚¯ãŒãã®å–å¼•ã‚’æœ‰åŠ¹ã§ã‚ã‚‹ã¨ç¢ºèªã—ã€å¯¾å¿œã™ã‚‹æ®‹é«˜ã‚’å¤‰æ›´ã§ãã‚‹ã‚ˆã†ã«ã€å–å¼•ã«ç½²åã™ã‚‹æ–¹æ³•ãŒå¿…è¦ã§ã™ã€‚ç½²åã¯é€ä¿¡è€…ã‚’èªè¨¼ã—ã€å—ä¿¡è€…ã«å¯¾ã—ã¦ã¯ãƒ¡ãƒƒã‚»ãƒ¼ã‚¸ãŒæ¼æ´©ã—ã¦ã„ãªã„ã“ã¨ã‚’è¨¼æ˜ã—ã¾ã™ã€‚

ã“ã‚Œã‚‰ã®æ§‹æˆè¦ç´ ã‚’å¿µé ­ã«ç½®ã„ã¦ã€é€é‡‘æ©Ÿèƒ½ã‚’ã¤ãã£ã¦ã„ãã¾ã—ã‚‡ã†!

### å°å…¥

é€é‡‘ã‚’ã™ã‚‹ãŸã‚ã«ã€ãƒˆãƒ©ãƒ³ã‚¶ã‚¯ã‚·ãƒ§ãƒ³ãƒ»ã‚ªãƒ–ã‚¸ã‚§ã‚¯ãƒˆã‚’æ§‹ç¯‰ã—ã¦é€ä¿¡ã™ã‚‹å¿…è¦ãŒã‚ã‚Šã¾ã™ã€‚

ãƒ‰ã‚­ãƒ¥ãƒ¡ãƒ³ãƒˆã‚’å‚ç…§ã—ã¦ã¿ã‚‹ã¨ã€ãƒˆãƒ©ãƒ³ã‚¶ã‚¯ã‚·ãƒ§ãƒ³ã‚’é€ä¿¡ã™ã‚‹æ–¹æ³•ã¯2ã¤ã‚ã‚‹ã“ã¨ãŒã‚ã‹ã‚Šã¾ã™ã€‚

- `Connection`ã®`sendTransaction`ãƒ¡ã‚½ãƒƒãƒ‰ã¨
- ä¸€èˆ¬çš„ãªé–¢æ•°`sendAndConfirmTransaction`

ãƒˆãƒ©ãƒ³ã‚¶ã‚¯ã‚·ãƒ§ãƒ³ã‚’é€ä¿¡ã—ãŸã‚ã¨ã€ã•ã‚‰ã« **æ®‹é«˜ã‚’æ›´æ–°ã™ã‚‹ãŸã‚ã«ç¢ºèªã‚’è¦æ±‚ã—ãŸã„** ã®ã§ã€ï¼’ã¤ç›®ã‚’è©¦ã—ã¦ã¿ã‚‹ã®ãŒè‰¯ã•ãã†ã§ã™ã€‚

![](/public/images/Solana-Wallet/section-3/3_2_1.png)

ã“ã®é–¢æ•°ã®ä»•æ§˜ã‚’èª­ã‚€ã¨ã€

- `Connection`
- `Transaction`ã‚ªãƒ–ã‚¸ã‚§ã‚¯ãƒˆ
- ç½²åè€…ã®é…åˆ—

ã®3ã¤ã®ãƒ‘ãƒ©ãƒ¡ãƒ¼ã‚¿ãƒ¼ã‚’ç”¨æ„ã™ã‚‹å¿…è¦ãŒã‚ã‚Šãã†ã§ã™ã€‚ã•ã‚‰ã«ã€ã“ã®é–¢æ•°ã¯ **ã€Œãƒˆãƒ©ãƒ³ã‚¶ã‚¯ã‚·ãƒ§ãƒ³ã«ç½²åã—ã€é€ä¿¡ã—ã€ç¢ºèªã™ã‚‹ã€** ã¨æ›¸ã‹ã‚Œã¦ã„ã‚‹ã®ã§ã€ã“ã‚Œã‹ã‚‰ã¤ãã‚ŠãŸã„æ©Ÿèƒ½ã«é©ã—ã¦ã„ã‚‹ã‚ˆã†ã«æ€ã„ã¾ã™ã€‚

ã¾ãšã¯ã“ã®é–¢æ•°ã‚’ã‚¤ãƒ³ãƒãƒ¼ãƒˆã—ã€æ¬¡ã«é–¢æ•°å‘¼ã³å‡ºã—ã«å¿…è¦ãªå¼•æ•°ã‚’ç”¨æ„ã—ã¦ã„ãã¾ã—ã‚‡ã†ã€‚

```javascript
// ãƒ•ã‚¡ã‚¤ãƒ«ã®å…ˆé ­ã§ sendAndConfirmTransaction é–¢æ•°ã‚’èª­ã¿è¾¼ã‚€
import { sendAndConfirmTransaction } from "@solana/web3.js";

// ã“ã‚Œã¾ã§ã¨åŒã˜ã‚ˆã†ã« connection ã‚¤ãƒ³ã‚¹ã‚¿ãƒ³ã‚¹ã‚’ä½œæˆã™ã‚‹
const connection = new Connection(network, 'confirmed');

// sendAndConfirmTransaction é–¢æ•°ã‚’å‘¼ã³å‡ºã™
// connection ã¯ã™ã§ã«ç”¨æ„ã—ã¦ã„ã‚‹ã®ã§ã€transaction ã¨ signers ã‚’ã“ã‚Œã‹ã‚‰ç”¨æ„ã—ã¦ã„ãã¾ã™
const confirmation = await sendAndConfirmTransaction(
  connection,
  transaction,
  signers
);
```

### Transaction

ã™ã§ã«`connection`ã¯ã§ãã¦ã„ã‚‹ã®ã§ã€æ¬¡ã«`transaction`ã‚’ä½œæˆã—ã¦ã„ãã¾ã—ã‚‡ã†ã€‚

ãƒ‰ã‚­ãƒ¥ãƒ¡ãƒ³ãƒˆã«ã‚ã‚‹[Transactionã‚¯ãƒ©ã‚¹ã¸ã®ãƒªãƒ³ã‚¯](https://solana-labs.github.io/solana-web3.js/classes/Transaction.html)ã‚’ãŸã©ã‚‹ã¨ã€`Transaction`ã‚ªãƒ–ã‚¸ã‚§ã‚¯ãƒˆã‚’ä½œæˆã™ã‚‹ã«ã¯ã€ãã®ã‚³ãƒ³ã‚¹ãƒˆãƒ©ã‚¯ã‚¿ã‚’ä½¿ç”¨ã™ã‚‹ã“ã¨ãŒã§ãã‚‹ã‚ˆã†ã§ã™ã€‚

```javascript
// ã‚µãƒ³ãƒ—ãƒ«ã‚³ãƒ¼ãƒ‰
const transaction = new Transaction();

console.log(transaction);
// > Transaction {signatures: Array(0), feePayer: undefined, instructions: Array(0), recentBlockhash: undefined, nonceInfo: undefined}
```

ä½œæˆã—ãŸãƒˆãƒ©ãƒ³ã‚¶ã‚¯ã‚·ãƒ§ãƒ³ã‚’è¦‹ã‚‹ã¨ã€é€ä¿¡è€…ã€å—ä¿¡è€…ã€é‡‘é¡ã¨ã„ã£ãŸæœ‰åŠ¹ãªãƒˆãƒ©ãƒ³ã‚¶ã‚¯ã‚·ãƒ§ãƒ³ã«å¿…è¦ãªæ§‹æˆè¦ç´ ãŒæ˜ã‚‰ã‹ã«æ¬ ã‘ã¦ã„ã¾ã™ãŒã€å…¥åŠ›ã§ãã‚‹ã¯ãšã®ä½¿ã„æ…£ã‚ŒãŸæ§‹é€ ã‚’æŒã£ã¦ã„ã‚‹ã‚ˆã†ã§ã™ã€‚

ãã‚Œãã‚Œã‚’èª¿æŸ»ã™ã‚‹ã“ã¨ã‚‚ã§ãã¾ã™ãŒã€æ‰‹å§‹ã‚ã¨ã—ã¦æœ‰æœ›ã ã¨æ€ã‚ã‚Œã‚‹`instructions`ãƒ—ãƒ­ãƒ‘ãƒ†ã‚£ã‚’èª¿ã¹ã¦ã¿ã¾ã—ã‚‡ã†ã€‚

ãƒ‰ã‚­ãƒ¥ãƒ¡ãƒ³ãƒˆã«ã¯ç›´æ„Ÿçš„ãªé€²ã‚æ–¹ãŒæ›¸ã‹ã‚Œã¦ã„ãªã„ã®ãŒæ®‹å¿µã§ã™ãŒã€[`SystemProgram`](https://solana-labs.github.io/solana-web3.js/classes/SystemProgram.html) ã¨ã„ã†ä¾¿åˆ©ãã†ãªã‚¯ãƒ©ã‚¹ã«`transfer`ãƒ¡ã‚½ãƒƒãƒ‰ãŒã‚ã‚Šã€ **ã€Œã‚ã‚‹å£åº§ã‹ã‚‰åˆ¥ã®å£åº§ã«lamportsã‚’ç§»ã™å–å¼•å‘½ä»¤ã‚’ç”Ÿæˆã™ã‚‹ã€** ã¨æ›¸ã‹ã‚Œã¦ã„ã¾ã™ã€‚ã“ã‚Œã¯ã¾ã•ã«ä»Šå¿…è¦ã¨ã—ã¦ã„ã‚‹ãƒ¡ã‚½ãƒƒãƒ‰ã®ã‚ˆã†ã§ã™ã­!

![](/public/images/Solana-Wallet/section-3/3_2_2.png)

### Transfer

`transfer`ãƒ¡ã‚½ãƒƒãƒ‰ã¯`TransferParams`ã‚ªãƒ–ã‚¸ã‚§ã‚¯ãƒˆã‚’å—ã‘å–ã‚Šã¾ã™ã€‚

ãã—ã¦`TransferParams`ã¯

- é€ä¿¡è€…
- å—ä¿¡è€…
- é‡‘é¡ï¼ˆlamportsï¼‰

ã“ã®3ã¤ã§æ§‹æˆã•ã‚Œã¦ã„ã¾ã™ã€‚

![](/public/images/Solana-Wallet/section-3/3_2_5.png)

ã“ã‚Œã¯ç§ãŸã¡ãŒå–å¼•ã«ä½¿ã„ãŸã„ãƒ‡ãƒ¼ã‚¿ã¨ä¸€è‡´ã—ã¦ã„ã¾ã™ã­!

ã§ã™ã®ã§ã€ `instructions`ã¯æ¬¡ã®ã‚ˆã†ã«çµ„ã¿ç«‹ã¦ã‚‹ã“ã¨ãŒã§ãã¾ã™ã€‚

```javascript
// ã‚µãƒ³ãƒ—ãƒ«ã‚³ãƒ¼ãƒ‰
const params = {
  fromPubkey: account.publicKey,
  lamports: 0.5 * LAMPORTS_PER_SOL,
  toPubkey: toAddress,
};
SystemProgram.transfer(params)
```

å—ä¿¡è€…ã®ã‚¢ãƒ‰ãƒ¬ã‚¹ã¯`Html Form`ã‹ã‚‰æ–‡å­—åˆ—ã§å—ã‘å–ã‚‹ã“ã¨ã‚’æƒ³å®šã—ã¦ã„ã¾ã™ãŒã€`toPubkey`ãƒ—ãƒ­ãƒ‘ãƒ†ã‚£ã§ã¯`PublicKey`å‹ã‚’æƒ³å®šã—ã¦ã„ã‚‹ãŸã‚ã€å—ä¿¡è€…ç”¨ã®`PublicKey`ã‚’ã‚¤ãƒ³ã‚¹ã‚¿ãƒ³ã‚¹åŒ–ã—ãªã‘ã‚Œã°ãªã‚Šã¾ã›ã‚“ã€‚

ã“ã‚Œã‚‰ã‚’`Transaction`ã«çµ„ã¿è¾¼ã‚€ã«ã¯ã€addãƒ¡ã‚½ãƒƒãƒ‰ã‚’ä½¿ç”¨ã—ã¾ã™ã€‚

```javascript
transaction.add(SystemProgram.transfer(params));
```

`sendAndConfirmTransaction`é–¢æ•°ã®3ã¤ã®ãƒ‘ãƒ©ãƒ¡ãƒ¼ã‚¿ã®ã†ã¡ã€2ã¤(`connection`ã¨`transaction`)ã‚’ç”¨æ„ã—ã¾ã—ãŸ

### ç½²å

æ¬¡ã«ã€`signers`ã®é…åˆ—ãŒå¿…è¦ã§ã™ã€‚ã“ã®é–¢æ•°ã®ä»•æ§˜ã‹ã‚‰ã€`signers`ã¯å°‘ãªãã¨ã‚‚1ã¤ã®`Signer`ã‚ªãƒ–ã‚¸ã‚§ã‚¯ãƒˆã‚’å«ã‚€é…åˆ—ã«ãªã‚‹ã“ã¨ãŒåˆ†ã‹ã£ã¦ã„ã¾ã™ã€‚[ãƒ‰ã‚­ãƒ¥ãƒ¡ãƒ³ãƒˆ](https://solana-labs.github.io/solana-web3.js/interfaces/Signer.html)ã§`Signer`ã®å‹ã‚’ç¢ºèªã™ã‚‹ã¨ã€`publicKey`ã¨`secretKey`ã¨ã„ã†2ã¤ã®ãƒ—ãƒ­ãƒ‘ãƒ†ã‚£ã‚’æŒã¤ã‚ªãƒ–ã‚¸ã‚§ã‚¯ãƒˆã®ã‚ˆã†ã§ã™ã€‚

![](/public/images/Solana-Wallet/section-3/3_2_3.png)

`account`ã‹ã‚‰ä¸¡æ–¹ã‚’å–å¾—ã§ãã‚‹ã®ã§ã€`signers`ã®é…åˆ—ã‚’ä½œæˆã™ã‚‹ã“ã¨ãŒã§ãã¾ã™ã€‚

```javascript
const signers = [
  {
    publicKey: account.publicKey,
    secretKey: account.secretKey,
  },
];
```

### é€ä¿¡ã¨ç¢ºèª

ã“ã‚Œã§3ã¤ã®ãƒ‘ãƒ©ãƒ¡ãƒ¼ã‚¿ãŒã™ã¹ã¦å®Œäº†ã—ãŸã®ã§ã€æœ€å¾Œã«`sendAndConfirmTransaction`ã‚’å‘¼ã³å‡ºã—ã¦ã€ãã®ç¢ºèªã‚’å¾…ã¤ã“ã¨ãŒã§ãã‚‹ã‚ˆã†ã«ãªã‚Šã¾ã—ãŸã€‚

```javascript
const transactionSignature = await sendAndConfirmTransaction(
  connection,
  transaction,
  signers,
);
```

ã“ã‚Œã§ã€`Solana`ã‚¢ã‚«ã‚¦ãƒ³ãƒˆé–“ã§æš—å·é€šè²¨ã‚’ç§»å‹•ã™ã‚‹ã“ã¨ãŒã§ãã‚‹æ©Ÿèƒ½ãŒå®Œæˆã—ã¾ã—ãŸã€‚ã“ã®æ©Ÿèƒ½ã‚’å®Œæˆã•ã›ã‚‹ã«ã¯ã€é€é‡‘å¾Œã«ã‚¢ã‚«ã‚¦ãƒ³ãƒˆã®æ®‹é«˜ã‚’æ›´æ–°ã™ã‚‹ãŸã‚ã«`refreshBalance`é–¢æ•°ã‚’å‘¼ã³å‡ºã™å¿…è¦ãŒã‚ã‚Šã¾ã™ã€‚

```javascript
await refreshBalance();
```

### é€é‡‘æ©Ÿèƒ½ã‚’å®Œæˆã•ã›ã‚ˆã†

ä»¥ä¸Šã‚’è¸ã¾ãˆã¦ã€ é€é‡‘æ©Ÿèƒ½ã‚’å®Œæˆã•ã›ã¦ã„ãã¾ã—ã‚‡ã†!ãã‚Œã§ã¯ã€`components/Transfer/index.js`ã‚’æ›´æ–°ã—ã¦ã„ãã¾ã™ã€‚

ã¾ãšã€å¿…è¦ãªé–¢æ•°ã‚„ã‚¯ãƒ©ã‚¹ã‚’ã‚¤ãƒ³ãƒãƒ¼ãƒˆã—ã¾ã™ã€‚

```javascript
import {
  Connection,
  LAMPORTS_PER_SOL,
  sendAndConfirmTransaction,
  SystemProgram,
  Transaction,
} from '@solana/web3.js';
import { useState } from 'react';
```

ã“ã‚Œã¾ã§åŒæ§˜ã€å®Ÿè£…ã«å¿…è¦ãªãƒ‡ãƒ¼ã‚¿ã‚’`Home`ã‚³ãƒ³ãƒãƒ¼ãƒãƒ³ãƒˆã‹ã‚‰å¼•æ•°ã¨ã—ã¦å—ã‘å–ã‚‹ã‚ˆã†ã«ã—ã¾ã™ã€‚ãã—ã¦ã€ãƒˆãƒ©ãƒ³ã‚¶ã‚¯ã‚·ãƒ§ãƒ³ã®çµæœã‚’ä¿å­˜ã—ã¦ãŠãã‚¹ãƒ†ãƒ¼ãƒˆã¨ã€ãƒ•ã‚©ãƒ¼ãƒ ã«å…¥åŠ›ã•ã‚ŒãŸé€ä¿¡å…ˆã‚¢ãƒ‰ãƒ¬ã‚¹ã‚’ä¿å­˜ã—ã¦ãŠãã‚¹ãƒ†ãƒ¼ãƒˆã‚’å®šç¾©ã—ã¾ã™ã€‚

```javascript
// `Transfer()`ã«å¼•æ•°ã‚’è¿½åŠ 
export default function Transfer({ account, network, refreshBalance }) {
  // ä¸‹è¨˜ã‚’è¿½åŠ 
  const [transactionSig, setTransactionSig] = useState('');
  const [toAddress, setToAddress] = useState(null);
```

é€é‡‘å‡¦ç†ã‚’è¡Œã†`handleTransfer`é–¢æ•°ã‚’å®šç¾©ã—ã€ä¸­èº«ã‚’æ›¸ã„ã¦ã„ãã¾ã—ã‚‡ã†ã€‚

```javascript
  const handleTransfer = async (e) => {
    e.preventDefault();

    try {
      setTransactionSig('');

      const connection = new Connection(network, 'confirmed');
      const params = {
        fromPubkey: account.publicKey,
        lamports: 0.5 * LAMPORTS_PER_SOL,
        toPubkey: toAddress,
      };
      const signers = [
        {
          publicKey: account.publicKey,
          secretKey: account.secretKey,
        },
      ];

      // Transactionã‚¤ãƒ³ã‚¹ã‚¿ãƒ³ã‚¹ã‚’ç”Ÿæˆã—ã€`transfer`ã®æŒ‡ç¤ºã‚’è¿½åŠ ã—ã¾ã™ã€‚
      const transaction = new Transaction();
      transaction.add(SystemProgram.transfer(params));
      // ãƒˆãƒ©ãƒ³ã‚¶ã‚¯ã‚·ãƒ§ãƒ³ã«ç½²åã‚’è¡Œã„ã€é€ä¿¡ã—ã¾ã™ã€‚
      const transactionSignature = await sendAndConfirmTransaction(
        connection,
        transaction,
        signers,
      );

      setTransactionSig(transactionSignature);

      // ã‚¢ã‚«ã‚¦ãƒ³ãƒˆã®æ®‹é«˜ã‚’æ›´æ–°ã—ã¾ã™ã€‚
      await refreshBalance();
    } catch (error) {
      console.error(error);
    }
  };
```

ãã—ã¦ã€å—ä¿¡è€…ã‚¢ãƒ‰ãƒ¬ã‚¹ã‚’å…¥åŠ›ã™ã‚‹ãƒ•ã‚©ãƒ¼ãƒ ã¨ã€é€é‡‘ãƒœã‚¿ãƒ³ã‚’å®Ÿè£…ã—ã¾ã™ã€‚
ã¤ã„ã§ã«ã€å®Ÿéš›ã®ãƒˆãƒ©ãƒ³ã‚¶ã‚¯ã‚·ãƒ§ãƒ³ã‚’ã‚ã¨ã§ç¢ºèªã§ãã‚‹ã‚ˆã†ã«ã€é€é‡‘å®Œäº†ã—ãŸã‚‰`Solana Explorer`ã¸ã®ãƒªãƒ³ã‚¯ã‚’è¡¨ç¤ºã—ã¦ã‚ã’ã‚‹ã¨è‰¯ã•ãã†ã§ã™!

```javascript
return (
  <>
    <form onSubmit={handleTransfer} className="my-6">
      <div className="flex items-center border-b border-indigo-500 py-2">
        <input
          type="text"
          className="w-full text-gray-700 mr-3 p-1 focus:outline-none"
          placeholder="é€é‡‘å…ˆã®ã‚¦ã‚©ãƒ¬ãƒƒãƒˆã‚¢ãƒ‰ãƒ¬ã‚¹"
          onChange={(e) => setToAddress(e.target.value)}
        />
        <input
          type="submit"
          className="p-2 text-white bg-indigo-500 focus:ring focus:ring-indigo-300 rounded-lg cursor-pointer"
          value="é€é‡‘"
        />
      </div>
    </form>
    {transactionSig && (
      <>
        <span className="text-red-600">é€é‡‘ãŒå®Œäº†ã—ã¾ã—ãŸ!</span>
        <a
          href={`https://explorer.solana.com/tx/${transactionSig}?cluster=${network}`}
          className="border-double border-b-4 border-b-indigo-600"
          target="_blank"
          rel="noopener noreferrer"
        >
          Solana Block Explorer ã§ãƒˆãƒ©ãƒ³ã‚¶ã‚¯ã‚·ãƒ§ãƒ³ã‚’ç¢ºèªã™ã‚‹
        </a>
      </>
    )}
  </>
);
```

`Transfer`ã‚³ãƒ³ãƒãƒ¼ãƒãƒ³ãƒˆã®å®Ÿè£…ãŒå®Œäº†ã—ãŸã®ã§ã€ãƒ†ã‚¹ãƒˆã‚¹ã‚¯ãƒªãƒ—ãƒˆã‚’å®Ÿè¡Œã—ã¦æ¨¡æ“¬çš„ã«å‹•ä½œç¢ºèªã‚’ã—ã¦ã¿ã¾ã—ã‚‡ã†ã€‚

ã‚¿ãƒ¼ãƒŸãƒŠãƒ«ä¸Šã§`npm run test`ã‚’å®Ÿè¡Œã—ã¾ã™ã€‚

components/Transfer/index.test.jsãŒ`PASS`ã—ã€ä»¥ä¸‹ã®ã‚ˆã†ã«ãªã£ã¦ã„ãŸã‚‰OKã§ã™ï¼

![](/public/images/Solana-Wallet/section-3/3_2_6.png)

ãã‚Œã§ã¯ã€`Transfer`ã‚³ãƒ³ãƒãƒ¼ãƒãƒ³ãƒˆã‚’`Home`ã‚³ãƒ³ãƒãƒ¼ãƒãƒ³ãƒˆã«çµ„ã¿è¾¼ã‚“ã§é€ä¿¡ãƒ•ã‚©ãƒ¼ãƒ ã‚’è¡¨ç¤ºã—ã¾ã—ã‚‡ã†ã€‚`pages/index.js`ã‚’æ›´æ–°ã—ã¦ã„ãã¾ã™ã€‚

ã‚¤ãƒ³ãƒãƒ¼ãƒˆæ–‡ã‚’è¿½åŠ ã—ã¾ã™ã€‚

```javascript
import Transfer from '../components/Transfer';
```

`Transfer`ã‚³ãƒ³ãƒãƒ¼ãƒãƒ³ãƒˆã‚’å‘¼ã³å‡ºã™ã‚³ãƒ¼ãƒ‰ã‚’è¿½åŠ ã—ã¦ã€ãƒ•ã‚©ãƒ¼ãƒ ã‚’ãƒ¬ãƒ³ãƒ€ãƒªãƒ³ã‚°ã—ã¾ã™ã€‚

```javascript
<div>
  <h2 className="p-2 border-dotted border-l-4 border-l-indigo-400">
    STEP5: é€é‡‘æ©Ÿèƒ½ã‚’å®Ÿè£…ã™ã‚‹
  </h2>
  {/* ä¸‹è¨˜ã‚’è¿½åŠ  */}
  {account && (
    <Transfer
      account={account}
      network={network}
      refreshBalance={refreshBalance}
    />
  )}
</div>
```

### âœ… å‹•ä½œç¢ºèª

ãŠã‚ã§ã¨ã†ã”ã–ã„ã¾ã™!ã“ã‚Œã§é€é‡‘æ©Ÿèƒ½ãŒå®Œæˆã—ã¾ã—ãŸã€‚

å®Ÿéš›ã«é€é‡‘ã—ã¦ã€ç›¸æ‰‹ã®ã‚¦ã‚©ãƒ¬ãƒƒãƒˆã®æ®‹é«˜ãŒå¢—ãˆã¦ã„ã‚‹ã‹ã‚’ç¢ºèªã—ã¦ãã ã•ã„ã€‚

è‡ªåˆ†ã²ã¨ã‚Šã§2ã¤ã®ã‚¦ã‚©ãƒ¬ãƒƒãƒˆã‚’åŒæ™‚ã«ä½œæˆï¼†è¡¨ç¤ºã—ãŸã„å ´åˆã¯ã€ã‚‚ã†ï¼‘ã¤ã‚¿ãƒ¼ãƒŸãƒŠãƒ«ã‚’ç«‹ã¡ä¸Šã’ã¦`npm run dev`ã‚’å®Ÿè¡Œã—ã¾ã™ã€‚

ãã†ã™ã‚‹ã¨ã€åˆ¥ã®ãƒãƒ¼ãƒˆã§ã‚¢ãƒ—ãƒªã‚±ãƒ¼ã‚·ãƒ§ãƒ³ãŒèµ·å‹•ã•ã‚Œã¾ã™ã®ã§ã€ãã¡ã‚‰ã§ã‚¦ã‚©ãƒ¬ãƒƒãƒˆã®ä½œæˆã‚’ã—ã€ã‚¢ãƒ‰ãƒ¬ã‚¹ã‚’ã‚³ãƒ”ãƒ¼ã—ã¦ï¼‘ã¤ç›®ã®ã‚¦ã‚©ãƒ¬ãƒƒãƒˆã‹ã‚‰é€é‡‘ã‚’è©¦ã—ã¦ã¿ã‚‹æ–¹æ³•ãŒãŠã™ã™ã‚ã§ã™!

â€»ä»Šå›ã®å®Ÿè£…ã§ã¯ã€é€é‡‘ã™ã‚‹SOLã¯`0.5 SOL`ã§å›ºå®šã¨ãªã£ã¦ã„ã¾ã™ãŒã€é€é‡‘ã™ã‚‹éš›ã«ã‚¬ã‚¹ä»£ã¨å‘¼ã°ã‚Œã‚‹æ‰‹æ•°æ–™ãŒå¿…è¦ã«ãªã‚‹ãŸã‚ã€æ®‹é«˜ãŒã¡ã‚‡ã†ã©`0.5 SOL`ã ã¨ã€é€é‡‘ãŒå¤±æ•—ã—ã¾ã™ã€‚ãã†ã„ã£ãŸã‚¨ãƒ©ãƒ¼ãŒç™ºç”Ÿã™ã‚‹ã“ã¨ã‚‚ç¢ºã‹ã‚ã¤ã¤ã€æ®‹é«˜ã‚’`1 SOL`ãªã©ã«ã—ã¦ã‹ã‚‰é€é‡‘ã‚’è©¦ã—ã¦ã¿ã¦ãã ã•ã„ã­ğŸ¥­

### ğŸ“ ã“ã®ã‚»ã‚¯ã‚·ãƒ§ãƒ³ã§è¿½åŠ ã—ãŸã‚³ãƒ¼ãƒ‰

- components/Transfer/index.js

```javascript
import {
  Connection,
  LAMPORTS_PER_SOL,
  sendAndConfirmTransaction,
  SystemProgram,
  Transaction,
} from '@solana/web3.js';
import { useState } from 'react';

export default function Transfer({ account, network, refreshBalance }) {
  const [transactionSig, setTransactionSig] = useState('');
  const [toAddress, setToAddress] = useState(null);

  const handleTransfer = async (e) => {
    e.preventDefault();

    try {
      setTransactionSig('');

      const connection = new Connection(network, 'confirmed');
      const params = {
        fromPubkey: account.publicKey,
        lamports: 0.5 * LAMPORTS_PER_SOL,
        toPubkey: toAddress,
      };
      const signers = [
        {
          publicKey: account.publicKey,
          secretKey: account.secretKey,
        },
      ];

      // Transactionã‚¤ãƒ³ã‚¹ã‚¿ãƒ³ã‚¹ã‚’ç”Ÿæˆã—ã€`transfer`ã®æŒ‡ç¤ºã‚’è¿½åŠ ã—ã¾ã™ã€‚
      const transaction = new Transaction();
      transaction.add(SystemProgram.transfer(params));
      // ãƒˆãƒ©ãƒ³ã‚¶ã‚¯ã‚·ãƒ§ãƒ³ã«ç½²åã‚’è¡Œã„ã€é€ä¿¡ã—ã¾ã™ã€‚
      const transactionSignature = await sendAndConfirmTransaction(
        connection,
        transaction,
        signers,
      );

      setTransactionSig(transactionSignature);

      // ã‚¢ã‚«ã‚¦ãƒ³ãƒˆã®æ®‹é«˜ã‚’æ›´æ–°ã—ã¾ã™ã€‚
      await refreshBalance();
    } catch (error) {
      console.error(error);
    }
  };

  return (
    <>
      <form onSubmit={handleTransfer} className="my-6">
        <div className="flex items-center border-b border-indigo-500 py-2">
          <input
            type="text"
            className="w-full text-gray-700 mr-3 p-1 focus:outline-none"
            placeholder="é€é‡‘å…ˆã®ã‚¦ã‚©ãƒ¬ãƒƒãƒˆã‚¢ãƒ‰ãƒ¬ã‚¹"
            onChange={(e) => setToAddress(e.target.value)}
          />
          <input
            type="submit"
            className="p-2 text-white bg-indigo-500 focus:ring focus:ring-indigo-300 rounded-lg cursor-pointer"
            value="é€é‡‘"
          />
        </div>
      </form>
      {transactionSig && (
        <>
          <span className="text-red-600">é€é‡‘ãŒå®Œäº†ã—ã¾ã—ãŸ!</span>
          <a
            href={`https://explorer.solana.com/tx/${transactionSig}?cluster=${network}`}
            className="border-double border-b-4 border-b-indigo-600"
            target="_blank"
            rel="noopener noreferrer"
          >
            Solana Block Explorer ã§ãƒˆãƒ©ãƒ³ã‚¶ã‚¯ã‚·ãƒ§ãƒ³ã‚’ç¢ºèªã™ã‚‹
          </a>
        </>
      )}
    </>
  );
}
```

- `pages/index.js`

```diff
import { clusterApiUrl, Connection, LAMPORTS_PER_SOL } from '@solana/web3.js';
import { useEffect, useState } from 'react'; // useEffectã®è¿½åŠ 

import Airdrop from '../components/Airdrop';
import GenerateWallet from '../components/GenerateWallet/';
import GetBalance from '../components/GetBalance';
import HeadComponent from '../components/Head';
import ImportWallet from '../components/ImportWallet';
+import Transfer from '../components/Transfer';

export default function Home() {

  // ===== çœç•¥ =====

  return (
    <div>

      // ===== çœç•¥ =====

        <div>
          <h2 className="p-2 border-dotted border-l-4 border-l-indigo-400">
            STEP4: ã‚¨ã‚¢ãƒ‰ãƒ­ãƒƒãƒ—æ©Ÿèƒ½ã‚’å®Ÿè£…ã™ã‚‹
          </h2>
          {account && (
            <Airdrop
              account={account}
              network={network}
              refreshBalance={refreshBalance}
            />
          )}
        </div>
        <hr className="my-6" />
        <div>
          <h2 className="p-2 border-dotted border-l-4 border-l-indigo-400">
            STEP5: é€é‡‘æ©Ÿèƒ½ã‚’å®Ÿè£…ã™ã‚‹
          </h2>
+          {account && (
+            <Transfer
+              account={account}
+              network={network}
+              refreshBalance={refreshBalance}
+            />
+          )}
        </div>
      </div>
    </div>
  );
}
```

### â˜•ï¸ è±†çŸ¥è­˜

Solana Explorerã§ã¯ã€ç‰¹å®šã®ãƒ–ãƒ­ãƒƒã‚¯ã€ã‚¢ã‚«ã‚¦ãƒ³ãƒˆã€ãƒˆãƒ©ãƒ³ã‚¶ã‚¯ã‚·ãƒ§ãƒ³ã€ã‚³ãƒ³ãƒˆãƒ©ã‚¯ãƒˆã€ãƒˆãƒ¼ã‚¯ãƒ³ã‚’ãƒãƒƒãƒˆãƒ¯ãƒ¼ã‚¯å˜ä½ã§æ¤œç´¢ã™ã‚‹ã“ã¨ãŒã§ãã¾ã™ã€‚ã‚¤ãƒ¼ã‚µãƒªã‚¢ãƒ ã§ã¯`Ethersacn`, BSCã¯`BscScan`ãŒæœ‰åã§ã™ã­ğŸ¥­

### ğŸ™‹â€â™‚ï¸ è³ªå•ã™ã‚‹

ã“ã“ã¾ã§ã®ä½œæ¥­ã§ä½•ã‹ã‚ã‹ã‚‰ãªã„ã“ã¨ãŒã‚ã‚‹å ´åˆã¯ã€Discordã®`#solana`ã§è³ªå•ã‚’ã—ã¦ãã ã•ã„ã€‚

ãƒ˜ãƒ«ãƒ—ã‚’ã™ã‚‹ã¨ãã®ãƒ•ãƒ­ãƒ¼ãŒå††æ»‘ã«ãªã‚‹ã®ã§ã€ã‚¨ãƒ©ãƒ¼ãƒ¬ãƒãƒ¼ãƒˆã«ã¯ä¸‹è¨˜ã®3ç‚¹ã‚’è¨˜è¼‰ã—ã¦ãã ã•ã„ âœ¨

```
1. è³ªå•ãŒé–¢é€£ã—ã¦ã„ã‚‹ã‚»ã‚¯ã‚·ãƒ§ãƒ³ç•ªå·ã¨ãƒ¬ãƒƒã‚¹ãƒ³ç•ªå·
2. ä½•ã‚’ã—ã‚ˆã†ã¨ã—ã¦ã„ãŸã‹
3. ã‚¨ãƒ©ãƒ¼æ–‡ã‚’ã‚³ãƒ”ãƒ¼&ãƒšãƒ¼ã‚¹ãƒˆ
4. ã‚¨ãƒ©ãƒ¼ç”»é¢ã®ã‚¹ã‚¯ãƒªãƒ¼ãƒ³ã‚·ãƒ§ãƒƒãƒˆ
```


ãŠã‚ã§ã¨ã†ã”ã–ã„ã¾ã™âœ¨é€é‡‘æ©Ÿèƒ½ãŒå®Œæˆã—ã¾ã—ãŸ!
æ¬¡ã®ãƒ¬ãƒƒã‚¹ãƒ³ã§ã¯ã€Vercelã«Webã‚¢ãƒ—ãƒªã‚’ãƒ‡ãƒ—ãƒ­ã‚¤ã—ã¦ã„ãã¾ã™ğŸ’ª
