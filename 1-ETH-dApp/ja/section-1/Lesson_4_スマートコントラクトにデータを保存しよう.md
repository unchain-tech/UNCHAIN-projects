### ğŸ“¦ ãƒ‡ãƒ¼ã‚¿ã‚’ä¿å­˜ã—ã‚ˆã†

ã“ã®ãƒ¬ãƒƒã‚¹ãƒ³ã§ã¯ã€ãƒ¦ãƒ¼ã‚¶ãƒ¼ãŒã‚ãªãŸã«é€ã£ãŸã€ŒğŸ‘‹ï¼ˆwaveï¼‰ã€ã®æ•°ã‚’ãƒ‡ãƒ¼ã‚¿ã¨ã—ã¦ä¿å­˜ã™ã‚‹æ–¹æ³•ã‚’å­¦ã³ã¾ã™ã€‚

ãƒ–ãƒ­ãƒƒã‚¯ãƒã‚§ãƒ¼ãƒ³ã¯ã€AWS ã®ã‚ˆã†ãªã‚¯ãƒ©ã‚¦ãƒ‰ä¸Šã«ãƒ‡ãƒ¼ã‚¿ã‚’ä¿å­˜ã§ãã‚‹ã‚µãƒ¼ãƒãƒ¼ã®ã‚ˆã†ãªã‚‚ã®ã§ã™ã€‚

ã—ã‹ã—ã€èª°ã‚‚ãã®ãƒ‡ãƒ¼ã‚¿ã‚’æ‰€æœ‰ã—ã¦ã„ã¾ã›ã‚“ã€‚

ä¸–ç•Œä¸­ã«ã€ãƒ–ãƒ­ãƒƒã‚¯ãƒã‚§ãƒ¼ãƒ³ä¸Šã«ãƒ‡ãƒ¼ã‚¿ã‚’ä¿å­˜ã™ã‚‹ä½œæ¥­ã‚’è¡Œã†ã€Œãƒã‚¤ãƒŠãƒ¼ã€ã¨å‘¼ã°ã‚Œã‚‹äººã€…ãŒå­˜åœ¨ã—ã¾ã™ã€‚ã“ã®ä½œæ¥­ã«å¯¾ã—ã¦ã€ã‚ãŸã—ãŸã¡ã¯ä»£é‡‘ã‚’æ”¯æ‰•ã„ã¾ã™ã€‚

ãã®ä»£é‡‘ã¯ã€é€šç§°**ã‚¬ã‚¹ä»£**ã¨å‘¼ã°ã‚Œã¾ã™ã€‚

ã‚¤ãƒ¼ã‚µãƒªã‚¢ãƒ ã®ãƒ–ãƒ­ãƒƒã‚¯ãƒã‚§ãƒ¼ãƒ³ä¸Šã«ãƒ‡ãƒ¼ã‚¿ã‚’æ›¸ãè¾¼ã‚€å ´åˆã€ã‚ãŸã—ãŸã¡ã¯ä»£é‡‘ã¨ã—ã¦ `$ETH` ã‚’ã€Œãƒã‚¤ãƒŠãƒ¼ã€ã«æ”¯æ‰•ã„ã¾ã™ã€‚

ãã‚Œã§ã¯ã€ã€ŒğŸ‘‹ï¼ˆwaveï¼‰ã€ã‚’ä¿å­˜ã™ã‚‹ãŸã‚ã«ã€`WavePortal.sol` ã‚’æ›´æ–°ã—ã¦ã„ãã¾ã—ã‚‡ã†ã€‚

```javascript
// SPDX-License-Identifier: UNLICENSED

pragma solidity ^0.8.4;

import "hardhat/console.sol";

contract WavePortal {

    uint256 totalWaves;

    constructor() {
        console.log("Here is my first smart contract!");
    }

    function wave() public {
        totalWaves += 1;
        console.log("%s has waved!", msg.sender);
    }

    function getTotalWaves() public view returns (uint256) {
        console.log("We have %d total waves!", totalWaves);
        return totalWaves;
    }
}
```

æ–°ã—ãè¿½åŠ ã•ã‚ŒãŸã‚³ãƒ¼ãƒ‰ã®ç†è§£ã‚’æ·±ã‚ã¾ã—ã‚‡ã†ã€‚

```javascript
// WavePortal.sol
uint256 totalWaves;
```

è‡ªå‹•çš„ã« `0` ã«åˆæœŸåŒ–ã•ã‚Œã‚‹ `totalWaves` å¤‰æ•°ãŒè¿½åŠ ã•ã‚Œã¾ã—ãŸã€‚ã“ã®å¤‰æ•°ã¯ã€ŒçŠ¶æ…‹å¤‰æ•°ã€ã¨å‘¼ã°ã‚Œã€`WavePortal` ã‚³ãƒ³ãƒˆãƒ©ã‚¯ãƒˆã®ã‚¹ãƒˆãƒ¬ãƒ¼ã‚¸ã«æ°¸ç¶šçš„ã«ä¿å­˜ã•ã‚Œã¾ã™ã€‚

* [uint256](https://www.iuec.co.jp/blockchain/uint256.html) ã¯ã€éå¸¸ã«å¤§ããªæ•°ã‚’æ‰±ã†ã“ã¨ãŒã§ãã‚‹ã€Œç¬¦å·ç„¡ã—æ•´æ•°ã®ãƒ‡ãƒ¼ã‚¿å‹ã€ã‚’æ„å‘³ã—ã¾ã™ã€‚
### ğŸ Solidity ã®ã‚¢ã‚¯ã‚»ã‚¹ä¿®é£¾å­ã«ã¤ã„ã¦

```javascript
// WavePortal.sol
function wave() public {
    totalWaves += 1;
    console.log("%s has waved!", msg.sender);
}
```

ã“ã“ã§ã€ã€ŒğŸ‘‹ï¼ˆwaveï¼‰ã€ã®å›æ•°ã‚’è¨˜éŒ²ã™ã‚‹ `wave()` é–¢æ•°ãŒè¿½åŠ ã•ã‚Œã¾ã—ãŸã€‚ã¾ãšã€`public`ã«ã¤ã„ã¦è¦‹ã¦ã„ãã¾ã™ã€‚

ã“ã‚Œã¯ã€Solidity ã®ã‚¢ã‚¯ã‚»ã‚¹ä¿®é£¾å­ã®ä¸€ã¤ã§ã™ã€‚

Solidity å«ã‚æ§˜ã€…ãªè¨€èªã«ãŠã„ã¦ã€å„é–¢æ•°ã®ã‚¢ã‚¯ã‚»ã‚¹æ¨©é™ã«ã¤ã„ã¦æŒ‡å®šã™ã‚‹å¿…è¦ãŒã‚ã‚Šã¾ã™ã€‚ãã®æŒ‡å®šã‚’è¡Œã†ã®ãŒã€ã‚¢ã‚¯ã‚»ã‚¹ä¿®é£¾å­ã§ã™ã€‚

Solidityã«ã¯ã€4ã¤ã®ã‚¢ã‚¯ã‚»ã‚¹ä¿®é£¾å­ãŒå­˜åœ¨ã—ã¾ã™ã€‚

* **`public`**: `public` ã§å®šç¾©ã•ã‚ŒãŸé–¢æ•°ã‚„å¤‰æ•°ã¯ã€ãã‚Œã‚‰ãŒå®šç¾©ã•ã‚Œã¦ã„ã‚‹ã‚³ãƒ³ãƒˆãƒ©ã‚¯ãƒˆã€ãã®ã‚³ãƒ³ãƒˆãƒ©ã‚¯ãƒˆãŒç¶™æ‰¿ã•ã‚ŒãŸåˆ¥ã®ã‚³ãƒ³ãƒˆãƒ©ã‚¯ãƒˆã€ãã‚Œã‚‰ã‚³ãƒ³ãƒˆãƒ©ã‚¯ãƒˆã®å¤–éƒ¨ã¨ã€**åŸºæœ¬çš„ã«ã©ã“ã‹ã‚‰ã§ã‚‚**å‘¼ã³å‡ºã™ã“ã¨ãŒã§ãã¾ã™ã€‚Solidityã§ã¯ã€ã‚¢ã‚¯ã‚»ã‚¹ä¿®é£¾å­ãŒã¤ã„ã¦ãªã„**é–¢æ•°**ã‚’ã€è‡ªå‹•çš„ã« `public` ã¨ã—ã¦æ‰±ã„ã¾ã™ã€‚

* **`private`**: `private` ã§å®šç¾©ã•ã‚ŒãŸé–¢æ•°ã‚„å¤‰æ•°ã¯ã€**ãã‚Œã‚‰ãŒå®šç¾©ã•ã‚ŒãŸã‚³ãƒ³ãƒˆãƒ©ã‚¯ãƒˆã§ã®ã¿**å‘¼ã³å‡ºã™ã“ã¨ãŒã§ãã¾ã™ã€‚

* **`internal`**: `internal` ã§å®šç¾©ã•ã‚ŒãŸé–¢æ•°ã‚„å¤‰æ•°ã¯ã€**ãã‚Œã‚‰ãŒå®šç¾©ã•ã‚ŒãŸã‚³ãƒ³ãƒˆãƒ©ã‚¯ãƒˆ**ã¨ã€**ãã®ã‚³ãƒ³ãƒˆãƒ©ã‚¯ãƒˆãŒç¶™æ‰¿ã•ã‚ŒãŸåˆ¥ã®ã‚³ãƒ³ãƒˆãƒ©ã‚¯ãƒˆ**ã®**ä¸¡æ–¹**ã‹ã‚‰å‘¼ã³å‡ºã™ã“ã¨ãŒã§ãã¾ã™ã€‚Solidity ã§ã¯ã€ã‚¢ã‚¯ã‚»ã‚¹ä¿®é£¾å­ãŒã¤ã„ã¦ãªã„**å¤‰æ•°**ã‚’ã€è‡ªå‹•çš„ã« `internal` ã¨ã—ã¦æ‰±ã„ã¾ã™ã€‚

* **`external`**: `external`ã§å®šç¾©ã•ã‚ŒãŸé–¢æ•°ã‚„å¤‰æ•°ã¯ã€**å¤–éƒ¨ã‹ã‚‰ã®ã¿**å‘¼ã³å‡ºã™ã“ã¨ãŒã§ãã¾ã™ã€‚

ä»¥ä¸‹ã«ã€Solidity ã®ã‚¢ã‚¯ã‚»ã‚¹ä¿®é£¾å­ã¨ã‚¢ã‚¯ã‚»ã‚¹æ¨©é™ã«ã¤ã„ã¦ã¾ã¨ã‚ã¦ã„ã¾ã™ã€‚

![](/public/images/1-ETH-dApp/section-1/1_4_1.png)

ã“ã‚Œã‹ã‚‰ Solidity ã®ã‚¢ã‚¯ã‚»ã‚¹ä¿®é£¾å­ã¯é »ç¹ã«ç™»å ´ã™ã‚‹ã®ã§ã€ã¾ãšã¯å¤§ã¾ã‹ãªç†è§£ãŒã§ãã‚Œã°å¤§ä¸ˆå¤«ã§ã™ã€‚
### ğŸ” `msg.sender` ã«ã¤ã„ã¦

```javascript
// WavePortal.sol
function wave() public {
    totalWaves += 1;
    console.log("%s has waved!", msg.sender);
}
```
`wave()` é–¢æ•°ã®ä¸­ã« `msg.sender` ãŒç™»å ´ã™ã‚‹ã®ã‚’ãŠæ°—ã¥ãã§ã—ã‚‡ã†ã‹ï¼Ÿ

`msg.sender` ã«å…¥ã‚‹å€¤ã¯ã€ãšã°ã‚Šã€**é–¢æ•°ã‚’å‘¼ã³å‡ºã—ãŸäººï¼ˆï¼ã‚ãªãŸã«ã€ŒğŸ‘‹ï¼ˆwaveï¼‰ã€ã‚’é€ã£ãŸäººï¼‰ã®ã‚¦ã‚©ãƒ¬ãƒƒãƒˆã‚¢ãƒ‰ãƒ¬ã‚¹**ã§ã™ã€‚

ã“ã‚Œã¯ã€**ãƒ¦ãƒ¼ã‚¶ãƒ¼èªè¨¼**ã®ã‚ˆã†ãªã‚‚ã®ã§ã™ã€‚
* ã‚¹ãƒãƒ¼ãƒˆã‚³ãƒ³ãƒˆãƒ©ã‚¯ãƒˆã«å«ã¾ã‚Œã‚‹é–¢æ•°ã‚’å‘¼ã³å‡ºã™ã«ã¯ã€ãƒ¦ãƒ¼ã‚¶ãƒ¼ã¯æœ‰åŠ¹ãªã‚¦ã‚©ãƒ¬ãƒƒãƒˆã‚’æ¥ç¶šã™ã‚‹å¿…è¦ãŒã‚ã‚Šã¾ã™ã€‚
* `msg.sender` ã§ã¯ã€èª°ãŒé–¢æ•°ã‚’å‘¼ã³å‡ºã—ãŸã‹ã‚’æ­£ç¢ºã«æŠŠæ¡ã—ã€ãƒ¦ãƒ¼ã‚¶ãƒ¼èªè¨¼ã‚’è¡Œã£ã¦ã„ã¾ã™ã€‚
### ğŸ–‹ Solidity ã®é–¢æ•°ä¿®é£¾å­ã«ã¤ã„ã¦

Solidity ã«ã¯ã€é–¢æ•°ï¼ˆfunctionï¼‰ã«å¯¾ã—ã¦ã®ã¿ä½¿ç”¨ã•ã‚Œã‚‹ä¿®é£¾å­ï¼ˆï¼é–¢æ•°ä¿®é£¾å­ï¼‰ãŒå­˜åœ¨ã—ã¾ã™ã€‚

Solidity é–‹ç™ºã§ã¯é–¢æ•°ä¿®é£¾å­ã‚’æ„è­˜ã—ã¦ãŠã‹ãªã„ã¨ãƒ‡ãƒ¼ã‚¿ã‚’è¨˜éŒ²ã™ã‚‹éš›ã®ã‚³ã‚¹ãƒˆï¼ˆï¼ã‚¬ã‚¹ä»£ï¼‰ãŒè·³ã­ä¸ŠãŒã£ã¦ã—ã¾ã†ã®ã§æ³¨æ„ãŒå¿…è¦ã§ã™ã€‚

ã“ã“ã§ãƒã‚¤ãƒ³ãƒˆã¨ãªã‚‹ã®ã¯ã€**ãƒ–ãƒ­ãƒƒã‚¯ãƒã‚§ãƒ¼ãƒ³ã«å€¤ã‚’æ›¸ãè¾¼ã‚€ã«ã¯ã‚¬ã‚¹ä»£ã‚’æ‰•ã†å¿…è¦ãŒã‚ã‚‹ã“ã¨ã€ãã—ã¦ãƒ–ãƒ­ãƒƒã‚¯ãƒã‚§ãƒ¼ãƒ³ã‹ã‚‰å€¤ã‚’å‚ç…§ã™ã‚‹ã ã‘ãªã‚‰ã€ã‚¬ã‚¹ä»£ã‚’æ‰•ã†å¿…è¦ãŒãªã„ã“ã¨ã§ã™ã€‚**

ã“ã“ã§ã¯ã€ä¸»è¦ãª2ã¤ã®é–¢æ•°ä¿®é£¾å­ã‚’ç´¹ä»‹ã—ã¾ã™ã€‚
* **`view`**: `view` é–¢æ•°ã¯ã€èª­ã¿å–ã‚Šå°‚ç”¨ã®é–¢æ•°ã§ã‚ã‚Šã€å‘¼ã³å‡ºã—ãŸå¾Œã«é–¢æ•°ã®ä¸­ã§å®šç¾©ã•ã‚ŒãŸçŠ¶æ…‹å¤‰æ•°ãŒå¤‰æ›´ã•ã‚Œãªã„ã‚ˆã†ã«ã—ã¾ã™ã€‚
* **`pure`**: `pure` é–¢æ•°ã¯ã€é–¢æ•°ã®ä¸­ã§å®šç¾©ã•ã‚ŒãŸçŠ¶æ…‹å¤‰æ•°ã‚’èª­ã¿è¾¼ã‚“ã ã‚Šå¤‰æ›´ã—ãŸã‚Šã›ãšã€é–¢æ•°ã«æ¸¡ã•ã‚ŒãŸãƒ‘ãƒ©ãƒ¡ãƒ¼ã‚¿ã‚„é–¢æ•°ã«å­˜åœ¨ã™ã‚‹ãƒ­ãƒ¼ã‚«ãƒ«å¤‰æ•°ã®ã¿ã‚’ä½¿ç”¨ã—ã¦å€¤ã‚’è¿”ã—ã¾ã™ã€‚

ä»¥ä¸‹ã«ã€Solidity ã®é–¢æ•°ä¿®é£¾å­ `pure` ã¨ `view` ã«ã¤ã„ã¦ã¾ã¨ã‚ã¦ã„ã¾ã™ã€‚

![](/public/images/1-ETH-dApp/section-1/1_4_2.png)

ã“ã“ã¾ã§ã§ç†è§£ã—ã¦æ¬²ã—ã„ã®ã¯ã€`pure` ã‚„ `view` é–¢æ•°ã‚’ä½¿ç”¨ã™ã‚Œã°ã€**ã‚¬ã‚¹ä»£ã‚’å‰Šæ¸›ã§ãã‚‹**ã¨ã„ã†ã“ã¨ã§ã™ã€‚

åŒæ™‚ã«ã€ãƒ–ãƒ­ãƒƒã‚¯ãƒã‚§ãƒ¼ãƒ³ä¸Šã«ãƒ‡ãƒ¼ã‚¿ã‚’æ›¸ãè¾¼ã¾ãªã„ã“ã¨ã§ã€**å‡¦ç†é€Ÿåº¦ã‚‚å‘ä¸Šã—ã¾ã™**ã€‚

`WavePortal.sol` ã«è¿½åŠ ã•ã‚ŒãŸä¸‹è¨˜ã®é–¢æ•°ã‚’è¦‹ã¦ã„ãã¾ã—ã‚‡ã†ã€‚

```javascript
// WavePortal.sol
function wave() public {
    totalWaves += 1;
    console.log("%s has waved!", msg.sender);
}
```

`wave()` é–¢æ•°ã«ã¯é–¢æ•°ä¿®é£¾å­ãŒã¤ã„ã¦ã„ãªã„ã“ã¨ã‚’ãŠæ°—ã¥ãã§ã—ã‚‡ã†ã‹ã€‚
* åŒä¸€ã®ãƒ¦ãƒ¼ã‚¶ãƒ¼ãŒé€ã£ãŸã€ŒğŸ‘‹ï¼ˆwaveï¼‰ã€ã®å›æ•°ãŒ `totalWaves += 1` ã«ã‚ˆã£ã¦ã‚«ã‚¦ãƒ³ãƒˆã•ã‚Œã€ãƒ–ãƒ­ãƒƒã‚¯ãƒã‚§ãƒ¼ãƒ³ä¸Šã«ãƒ‡ãƒ¼ã‚¿ãŒæ›¸ãè¾¼ã¾ã‚Œã¾ã™ã€‚
* ã¾ãŸã€ã“ã®é–¢æ•°ãŒå‘¼ã³å‡ºã•ã‚Œã‚‹ã¨ã€`console.log("%s has waved!", msg.sender)` ã«ã‚ˆã£ã¦ã€ã‚ãªãŸã«ã€ŒğŸ‘‹ï¼ˆwaveï¼‰ã€ã‚’é€ã£ãŸãƒ¦ãƒ¼ã‚¶ãƒ¼ã®ã‚¢ãƒ‰ãƒ¬ã‚¹ãŒã‚¿ãƒ¼ãƒŸãƒŠãƒ«ä¸Šã«è¡¨ç¤ºã•ã‚Œã¾ã™ã€‚

ãã‚Œã§ã¯ã€ä¸‹è¨˜ã®ã‚³ãƒ¼ãƒ‰ã‚‚è¦‹ã¦ã„ãã¾ã—ã‚‡ã†ã€‚

```javascript
// WavePortal.sol
function getTotalWaves() public view returns (uint256) {
    console.log("We have %d total waves!", totalWaves);
    return totalWaves;
}
```

ä¸€æ–¹ã€`view` ã¨ã„ã†é–¢æ•°ä¿®é£¾å­ãŒã¤ã„ãŸ `getTotalWaves()` é–¢æ•°ã¯ã€ãƒ¦ãƒ¼ã‚¶ãƒ¼ãŒã‚ãªãŸã«é€ã£ãŸã€ŒğŸ‘‹ï¼ˆwaveï¼‰ã€ã®ç·æ•°ã®å‚ç…§ã®ã¿ã‚’è¡Œã„ã¾ã™ã€‚
### âœ… `run.js` ã‚’æ›´æ–°ã—ã¦é–¢æ•°ã‚’å‘¼ã³å‡ºã™

æ¬¡ã«ã€`run.js` ã‚’ä»¥ä¸‹ã®ã‚ˆã†ã«æ›´æ–°ã—ã¦ã„ãã¾ã™ã€‚

```javascript
// run.js
const main = async () => {
  const [owner, randomPerson] = await hre.ethers.getSigners();
  const waveContractFactory = await hre.ethers.getContractFactory("WavePortal");
  const waveContract = await waveContractFactory.deploy();
  const wavePortal = await waveContract.deployed();

  console.log("Contract deployed to:", wavePortal.address);
  console.log("Contract deployed by:", owner.address);

  let waveCount;
  waveCount = await waveContract.getTotalWaves();

  let waveTxn = await waveContract.wave();
  await waveTxn.wait();

  waveCount = await waveContract.getTotalWaves();
};

const runMain = async () => {
  try {
    await main();
    process.exit(0);
  } catch (error) {
    console.log(error);
    process.exit(1);
  }
};

runMain();
```

`WavePortal.sol` ã®ä¸­ã§ `public` ã¨æŒ‡å®šã—ãŸ `wave()` é–¢æ•°ã¨ `getTotalWaves()` é–¢æ•°ã¯ã€ãƒ–ãƒ­ãƒƒã‚¯ãƒã‚§ãƒ¼ãƒ³ä¸Šã§å‘¼ã³å‡ºã™ã“ã¨ãŒã§ãã‚‹ã‚ˆã†ã«ãªã‚Šã¾ã—ãŸã€‚

`run.js`ã‹ã‚‰ã€ãã‚Œã‚‰é–¢æ•°ã‚’å‘¼ã³å‡ºã—ã¦ã„ãã¾ã™ã€‚
* å¾©ç¿’ã¨ãªã‚Šã¾ã™ãŒã€ `run.js` ã¯ãƒ‡ãƒãƒƒã‚°ç”¨ã®ãƒ†ã‚¹ãƒˆã‚³ãƒ¼ãƒ‰ã§ã™ã€‚
* `run.js` ã¯æœ¬ç•ªç’°å¢ƒã§ãƒ¦ãƒ¼ã‚¶ãƒ¼ãŒã‚ãªãŸã®ã‚¹ãƒãƒ¼ãƒˆã‚³ãƒ³ãƒˆãƒ©ã‚¯ãƒˆã‚’å‘¼ã³å‡ºã™ã‚·ãƒãƒ¥ã‚¨ãƒ¼ã‚·ãƒ§ãƒ³ã‚’æƒ³å®šã—ã¦ã€ã‚³ãƒ¼ãƒ‰ãŒå•é¡Œãªãèµ°ã‚‹ã‹ãƒ†ã‚¹ãƒˆã™ã‚‹ãŸã‚ã«ã€ä½œã‚‰ã‚Œã¦ã„ã¾ã™ã€‚

`public` ã§å®šç¾©ã—ãŸé–¢æ•°ã¯ API ã®ã‚¨ãƒ³ãƒ‰ãƒã‚¤ãƒ³ãƒˆã®ã‚ˆã†ãªã‚‚ã®ã§ã™ã€‚

æ›´æ–°ã•ã‚ŒãŸéƒ¨åˆ†ã‚’1è¡Œãšã¤è¦‹ã¦ã„ãã¾ã—ã‚‡ã†ã€‚

```javascript
// run.js
const [owner, randomPerson] = await hre.ethers.getSigners();
```

ãƒ–ãƒ­ãƒƒã‚¯ãƒã‚§ãƒ¼ãƒ³ã« `WavePortal` ã‚³ãƒ³ãƒˆãƒ©ã‚¯ãƒˆã‚’ãƒ‡ãƒ—ãƒ­ã‚¤ã™ã‚‹éš›ã€ã€ŒğŸ‘‹ï¼ˆwaveï¼‰ã€ã‚’é€ã‚‹å´ã®ã‚¦ã‚©ãƒ¬ãƒƒãƒˆã‚¢ãƒ‰ãƒ¬ã‚¹ãŒå¿…è¦ã§ã™ã€‚

`hre.ethers.getSigners()` ã¯Hardhat ãŒæä¾›ã™ã‚‹ãƒ©ãƒ³ãƒ€ãƒ ãªã‚¢ãƒ‰ãƒ¬ã‚¹ã‚’ç”Ÿæˆã™ã‚‹é–¢æ•°ã§ã™ã€‚

* ã“ã“ã§ã¯ã€ã‚³ãƒ³ãƒˆãƒ©ã‚¯ãƒˆæ‰€æœ‰è€…ï¼ˆï¼ã‚ãªãŸï¼‰ã®ã‚¦ã‚©ãƒ¬ãƒƒãƒˆã‚¢ãƒ‰ãƒ¬ã‚¹ã¨ã€ã‚ãªãŸã«ã€ŒğŸ‘‹ï¼ˆwaveï¼‰ã€ã‚’é€ã‚‹ãƒ¦ãƒ¼ã‚¶ãƒ¼ã®ã‚¦ã‚©ãƒ¬ãƒƒãƒˆã‚¢ãƒ‰ãƒ¬ã‚¹ã‚’ Hardhat ãŒãã‚Œãã‚Œç”Ÿæˆã—ã€`owner` ã¨ `randomPerson` ã¨ã„ã†å¤‰æ•°ã«æ ¼ç´ã—ã¦ã„ã¾ã™ã€‚

* `randomPerson` ã¯ã€ãƒ†ã‚¹ãƒˆç’°å¢ƒã§ã€ŒğŸ‘‹ï¼ˆwaveï¼‰ã€ã‚’é€ã£ã¦ãã‚‹ãƒ¦ãƒ¼ã‚¶ãƒ¼ã ã¨æ€ã£ã¦ãã ã•ã„ã€‚

æ¬¡ã«ã€ä¸‹è¨˜ã®ã‚³ãƒ¼ãƒ‰ã‚’è¦‹ã¦ã„ãã¾ã—ã‚‡ã†ã€‚

```javascript
// run.js
  console.log("Contract deployed to:", wavePortal.address);
```

ã“ã“ã§ã¯ã€ã‚ãªãŸã®ã‚¹ãƒãƒ¼ãƒˆã‚³ãƒ³ãƒˆãƒ©ã‚¯ãƒˆã®ãƒ‡ãƒ—ãƒ­ã‚¤å…ˆã®ã‚¢ãƒ‰ãƒ¬ã‚¹ï¼ˆï¼ `wavePortal.address` ï¼‰ã‚’ã‚¿ãƒ¼ãƒŸãƒŠãƒ«ã«å‡ºåŠ›ã—ã¦ã„ã¾ã™ã€‚

```javascript
// run.js
console.log("Contract deployed by:", owner.address);
```

ã“ã“ã§ã¯ã€`WavePortal` ã‚³ãƒ³ãƒˆãƒ©ã‚¯ãƒˆã‚’ãƒ‡ãƒ—ãƒ­ã‚¤ã—ãŸäººï¼ˆï¼ã‚ãªãŸï¼‰ã®ã‚¢ãƒ‰ãƒ¬ã‚¹ï¼ˆï¼ `owner.address` ï¼‰ã‚’ã‚¿ãƒ¼ãƒŸãƒŠãƒ«ã«å‡ºåŠ›ã—ã¦ã„ã¾ã™ã€‚

æœ€å¾Œã«ã€ä¸‹è¨˜ã®ã‚³ãƒ¼ãƒ‰ã‚’è¦‹ã¦ã„ãã¾ã—ã‚‡ã†ã€‚

```javascript
// run.js
let waveCount;
waveCount = await waveContract.getTotalWaves();

let waveTxn = await waveContract.wave();
await waveTxn.wait();

waveCount = await waveContract.getTotalWaves();
```

ã“ã“ã§ã¯ã€é€šå¸¸ã® API ã¨åŒã˜ã‚ˆã†ã«ã€é–¢æ•°ã‚’æ‰‹å‹•ã§å‘¼ã³å‡ºã—ã¦ã„ã¾ã™ã€‚1è¡Œãšã¤è¦‹ã¦ã„ãã¾ã—ã‚‡ã†ã€‚

```javascript
// run.js
let waveCount;
waveCount = await waveContract.getTotalWaves();
```

ã¾ãšã€`let waveCount` ã§ãƒ­ãƒ¼ã‚«ãƒ«å¤‰æ•°ã‚’å®£è¨€ã—ã¾ã™ã€‚

æ¬¡ã«ã€`waveContract.getTotalWaves()` ã§ `WavePortal.sol` ã«è¨˜è¼‰ã•ã‚ŒãŸ `getTotalWaves()` ã‚’å‘¼ã³å‡ºã—ã€æ—¢å­˜ã®ã€ŒğŸ‘‹ï¼ˆwaveï¼‰ã€ã®ç·æ•°ã‚’å–å¾—ã—ã¾ã™ã€‚

```javascript
// run.js
let waveTxn = await waveContract.wave();
await waveTxn.wait();
```

`let waveTxn = await waveContract.wave()` ã§ã¯ã€ãƒ¦ãƒ¼ã‚¶ãƒ¼ãŒæ–°ã—ã„ã€ŒğŸ‘‹ï¼ˆwaveï¼‰ã€ã‚’é€ã£ãŸã“ã¨ã‚’æ‰¿èªã™ã‚‹ã¾ã§ã€ã‚³ãƒ³ãƒˆãƒ©ã‚¯ãƒˆã‹ã‚‰ã®å¿œç­”ã‚’ãƒ•ãƒ­ãƒ³ãƒˆã‚¨ãƒ³ãƒ‰ãŒå¾…æ©Ÿã™ã‚‹ã‚ˆã†è¨­å®šã—ã¦ã„ã¾ã™ã€‚

`.wave()` é–¢æ•°ã§ã¯ãƒ–ãƒ­ãƒƒã‚¯ãƒã‚§ãƒ¼ãƒ³ä¸Šã®æ›¸ãè¾¼ã¿ãŒç™ºç”Ÿã™ã‚‹ã®ã§ã€ã‚¬ã‚¹ä»£ãŒã‹ã‹ã‚Šã¾ã™ã€‚ã‚ˆã£ã¦ã€ãƒ¦ãƒ¼ã‚¶ãƒ¼ã¯å–å¼•ã‚’ç¢ºèªã™ã‚‹å¿…è¦ãŒã‚ã‚Šã¾ã™ã€‚

MetaMask ã‚’ä½¿ã£ã¦ã„ã¦ã€å–å¼•ã‚’æ‰¿èªã™ã‚‹ãŸã‚ã«æ•°ç§’æ‰‹é–“å–ã£ãŸçµŒé¨“ã¯ã‚ã‚Šã¾ã›ã‚“ã‹ï¼Ÿã‚ãªãŸãŒæ‰¿èªã‚’è¡Œã£ã¦ã„ã‚‹é–“ã€ã‚³ãƒ¼ãƒ‰ã¯æ¬¡ã®å‡¦ç†ã«é€²ã¾ãšã€å¾…æ©Ÿã—ã¦ã„ã¾ã™ã€‚

æ‰¿èªãŒçµ‚ã‚ã£ãŸã‚‰ã€`await waveTxn.wait()` ãŒå®Ÿè¡Œã•ã‚Œã€ãƒˆãƒ©ãƒ³ã‚¶ã‚¯ã‚·ãƒ§ãƒ³ã®çµæœã‚’å–å¾—ã—ã¾ã™ã€‚ã‚³ãƒ¼ãƒ‰ãŒå†—é•·ã«æ„Ÿã˜ã‚‹ã‹ã‚‚ã—ã‚Œã¾ã›ã‚“ãŒã€å¤§äº‹ãªå‡¦ç†ã§ã™ã€‚

```javascript
// run.js
waveCount = await waveContract.getTotalWaves();
```

ã“ã“ã§æœ€å¾Œã«ã€`waveCount` ã‚’ã‚‚ã†ä¸€åº¦å–å¾—ã—ã¦ã€`+1` ã•ã‚ŒãŸã‹ã©ã†ã‹ã‚’ç¢ºèªã—ã¾ã™ã€‚
### ğŸ§™â€â™€ï¸ ãƒ†ã‚¹ãƒˆã‚’å®Ÿè¡Œã—ã‚ˆã†

`my-wave-portal` ãƒ‡ã‚£ãƒ¬ã‚¯ãƒˆãƒªã«ç§»å‹•ã—ã€ä¸‹è¨˜ã‚’å®Ÿè¡Œã—ã¦ã¿ã¾ã—ã‚‡ã†ã€‚

```bash
npx hardhat run scripts/run.js
```

ä¾‹ï¼‰ã‚¿ãƒ¼ãƒŸãƒŠãƒ«ã®å‡ºåŠ›çµæœ

```
Here is my first smart contract!
Contract deployed to: 0x5FbDB2315678afecb367f032d93F642f64180aa3
Contract deployed by: 0xf39Fd6e51aad88F6F4ce6aB8827279cffFb92266
We have 0 total waves!
0xf39fd6e51aad88f6f4ce6ab8827279cfffb92266 has waved!
We have 1 total waves!
```

ã‚ãªãŸã®ã‚¿ãƒ¼ãƒŸãƒŠãƒ«ã§ã‚‚åŒã˜ã‚ˆã†ãªçµæœãŒå‡ºåŠ›ã•ã‚ŒãŸã§ã—ã‚‡ã†ã‹ï¼Ÿ

ã“ã®çµæœã¯ã€ã‚ãªãŸãŒã“ã®ã‚¹ãƒãƒ¼ãƒˆã‚³ãƒ³ãƒˆãƒ©ã‚¯ãƒˆã® `owner` ã§ã‚ã‚Šã€åŒæ™‚ã«ã‚ãªãŸè‡ªèº«ãŒè‡ªåˆ†ã«ã€ŒğŸ‘‹ï¼ˆwaveï¼‰ã€ã‚’é€ã£ãŸã“ã¨ã‚’ç¤ºã—ã¦ã„ã¾ã™ã€‚

ãªã®ã§ã€`Contract deployed by` ã«ç¶šãã‚¢ãƒ‰ãƒ¬ã‚¹ã¨ã€ã€Œ `0x...` has waved!ã€ã®ã‚¢ãƒ‰ãƒ¬ã‚¹ã¯ä¸€è‡´ã—ã¦ã„ã‚‹ã¯ãšã§ã™ã€‚

ã“ã“ã¾ã§ã§å®Ÿè£…ã—ãŸå†…å®¹ã¯ã€ã»ã¨ã‚“ã©ã®ã‚¹ãƒãƒ¼ãƒˆã‚³ãƒ³ãƒˆãƒ©ã‚¯ãƒˆã®åŸºæœ¬ã«ãªã‚‹ã‚‚ã®ã§ã™ã€‚
1. é–¢æ•°ã‚’èª­ã¿è¾¼ã‚€ã€‚
2. é–¢æ•°ã‚’æ›¸ãè¾¼ã‚€ã€‚
3. çŠ¶æ…‹å¤‰æ•°ã‚’å¤‰æ›´ã™ã‚‹ã€‚

ã“ã‚Œã‚‰ã¯ã€WavePortal ã®WEBã‚µã‚¤ãƒˆã‚’æ§‹ç¯‰ã™ã‚‹ä¸Šã§å¤§åˆ‡ãªè¦ç´ ã§ã™ã€‚
### ğŸ¤ ä»–ã®ãƒ¦ãƒ¼ã‚¶ãƒ¼ã«ğŸ‘‹ï¼ˆwaveï¼‰ã‚’é€ã£ã¦ã‚‚ã‚‰ã†

ã“ã“ã§ã¯ã€ä»–ã®ãƒ¦ãƒ¼ã‚¶ãƒ¼ãŒã‚ãªãŸã«ã€ŒğŸ‘‹ï¼ˆwaveï¼‰ã€ã‚’é€ã£ãŸå ´åˆã®ã‚·ãƒŸãƒ¥ãƒ¬ãƒ¼ã‚·ãƒ§ãƒ³ã‚’è¡Œã„ã¾ã™ã€‚

ä¸‹è¨˜ã‚’`run.js`  ã«åæ˜ ã•ã›ã¦ã€ã‚¿ãƒ¼ãƒŸãƒŠãƒ«ã«ã©ã®ã‚ˆã†ãªçµæœãŒã§ã‚‹ã‹ãƒ†ã‚¹ãƒˆã—ã¦ã¿ã¾ã—ã‚‡ã†ã€‚

```javascript
// run.js
const main = async () => {
  const [owner, randomPerson] = await hre.ethers.getSigners();
  const waveContractFactory = await hre.ethers.getContractFactory("WavePortal");
  const waveContract = await waveContractFactory.deploy();
  const wavePortal = await waveContract.deployed();

  console.log("Contract deployed to:", wavePortal.address);
  console.log("Contract deployed by:", owner.address);

  let waveCount;
  waveCount = await waveContract.getTotalWaves();

  let waveTxn = await waveContract.wave();
  await waveTxn.wait();

  waveCount = await waveContract.getTotalWaves();

  waveTxn = await waveContract.connect(randomPerson).wave();
  await waveTxn.wait();

  waveCount = await waveContract.getTotalWaves();
};

const runMain = async () => {
  try {
    await main();
    process.exit(0);
  } catch (error) {
    console.log(error);
    process.exit(1);
  }
};

runMain();
```

`run.js` ã«è¿½åŠ ã•ã‚ŒãŸã‚³ãƒ¼ãƒ‰ã¯ä»¥ä¸‹ã«ãªã‚Šã¾ã™ã€‚ç¢ºèªã—ã¦ã„ãã¾ã—ã‚‡ã†ã€‚

```javascript
// run.js
waveTxn = await waveContract.connect(randomPerson).wave();
await waveTxn.wait();
waveCount = await waveContract.getTotalWaves();
```

ã“ã®ãƒ¬ãƒƒã‚¹ãƒ³ã®åºç›¤ã§ã€`run.js` ã®ä¸­ã§ `randomPerson` ã®ã‚¢ãƒ‰ãƒ¬ã‚¹ã‚’å–å¾—ã—ãŸã®ã‚’è¦šãˆã¦ã„ã¾ã™ã‹ï¼Ÿ
* `randomPerson` ã«ã¯ã€Hardhat ãŒå–å¾—ã—ãŸãƒ©ãƒ³ãƒ€ãƒ ãªã‚¢ãƒ‰ãƒ¬ã‚¹ãŒæ ¼ç´ã•ã‚Œã¦ã„ã¾ã™ã€‚
* `randomPerson` ã¯ã€ã“ã®ã‚·ãƒŸãƒ¥ãƒ¬ãƒ¼ã‚·ãƒ§ãƒ³ã®ãŸã‚ã«å­˜åœ¨ã—ã¦ã„ãŸã®ã§ã™ã€‚

```javascript
// run.js
waveTxn = await waveContract.connect(randomPerson).wave();
```

ã“ã“ã§ã¯ã€`.connect(randomPerson)` ã‚’ç”¨ã„ã¦ã€ä»–ã®ãƒ¦ãƒ¼ã‚¶ãƒ¼ãŒã‚ãªãŸã«ã€ŒğŸ‘‹ï¼ˆwaveï¼‰ã€ã‚’é€ã£ãŸçŠ¶æ…‹ã‚’ã‚·ãƒŸãƒ¥ãƒ¬ãƒ¼ã‚·ãƒ§ãƒ³ã—ã¦ã„ã¾ã™ã€‚

```javascript
// run.js
await waveTxn.wait();
waveCount = await waveContract.getTotalWaves();
```

ã“ã“ã§ã¯ã€ã‚ãªãŸãŒè‡ªåˆ†è‡ªèº«ã«ã€ŒğŸ‘‹ï¼ˆwaveï¼‰ã€ã‚’é€ã‚Šã€ãã®æ‰¿èªã‚’æŒã£ã¦ã‹ã‚‰ã€`waveCount` ã®å€¤ã‚’æ›´æ–°ã—ãŸã‚ˆã†ã«ã€`randomPerson` ã®æŒ™å‹•ã‚’ç¢ºèªã—ã¦ã‹ã‚‰ã€`waveCount` ã®æ›´æ–°ï¼ˆ `+1` ï¼‰ã‚’è¡Œã£ã¦ã„ã¾ã™ã€‚

ãã‚Œã§ã¯ã€`run.js` ã‚’æ›´æ–°ã—ã¦ã€`scripts` ãƒ‡ã‚£ãƒ¬ã‚¯ãƒˆãƒªã«ç§»å‹•ã—ã€ä¸‹è¨˜ã‚’å®Ÿè¡Œã—ã¦ã¿ã¾ã—ã‚‡ã†ã€‚

```bash
npx hardhat run run.js
```

ä¸‹è¨˜ã®ã‚ˆã†ãªçµæœãŒã‚¿ãƒ¼ãƒŸãƒŠãƒ«ã«å‡ºåŠ›ã•ã‚Œã‚Œã°æˆåŠŸã§ã™ã€‚

ä¾‹ï¼‰ã‚¿ãƒ¼ãƒŸãƒŠãƒ«ã®å‡ºåŠ›çµæœ
```
Here is my first smart contract!
Contract deployed to: 0x5FbDB2315678afecb367f032d93F642f64180aa3
Contract deployed by: 0xf39Fd6e51aad88F6F4ce6aB8827279cffFb92266
We have 0 total waves!
0xf39fd6e51aad88f6f4ce6ab8827279cfffb92266 has waved!
We have 1 total waves!
0x70997970c51812dc3a010c7d01b50e0d17dc79c8 has waved!
We have 2 total waves!
```

`We have # total waves!` ã® `#` ãŒæ›´æ–°ã•ã‚Œã¦ã„ã‚‹ã“ã¨ã‚’ç¢ºèªã—ã¦ãã ã•ã„ã€‚

ä¸€äººã®ç›®ã®ã€ŒğŸ‘‹ï¼ˆwaveï¼‰ã€ã¯ã‚ãªãŸè‡ªèº«ãªã®ã§ `We have 1 total waves!` ã®å‰ã«è¡¨ç¤ºã•ã‚Œã¦ã„ã‚‹ã‚¢ãƒ‰ãƒ¬ã‚¹ã¯ã€`Contract deployed by` ã«ç¶šãã‚¢ãƒ‰ãƒ¬ã‚¹ã¨ä¸€è‡´ã—ã¦ã„ã‚‹ã“ã¨ã‚’ç¢ºèªã—ã¦ãã ã•ã„ã€‚

`We have 2 total waves!` ã«ç¶šãã‚¢ãƒ‰ãƒ¬ã‚¹ã¯ã€HardhatãŒå–å¾—ã—ãŸ `randomPerson` ã®ã‚¢ãƒ‰ãƒ¬ã‚¹ã§ã™ã€‚

ä¸‹è¨˜ã®ã‚ˆã†ã« `run.js` ã« `randomPerson` ã‚’è¿½åŠ ã™ã‚‹ã¨ã€ã•ã‚‰ã«ã‚‚ã†ä¸€äººè¿½åŠ ã—ã¦ã€ã‚·ãƒŸãƒ¥ãƒ¬ãƒ¼ã‚·ãƒ§ãƒ³ã‚’è¡Œã†ã“ã¨ã‚‚ã§ãã¾ã™ã€‚

```javascript
// run.js
const [owner, randomPerson1, randomPerson2] = await hre.ethers.getSigners();
```
### ğŸ™‹â€â™‚ï¸ è³ªå•ã™ã‚‹

ã“ã“ã¾ã§ã®ä½œæ¥­ã§ä½•ã‹ã‚ã‹ã‚‰ãªã„ã“ã¨ãŒã‚ã‚‹å ´åˆã¯ã€Discord ã® `#section-1` ã§è³ªå•ã‚’ã—ã¦ãã ã•ã„ã€‚

ãƒ˜ãƒ«ãƒ—ã‚’ã™ã‚‹ã¨ãã®ãƒ•ãƒ­ãƒ¼ãŒå††æ»‘ã«ãªã‚‹ã®ã§ã€ã‚¨ãƒ©ãƒ¼ãƒ¬ãƒãƒ¼ãƒˆã«ã¯ä¸‹è¨˜ã®3ç‚¹ã‚’è¨˜è¼‰ã—ã¦ãã ã•ã„âœ¨
```
1. è³ªå•ãŒé–¢é€£ã—ã¦ã„ã‚‹ã‚»ã‚¯ã‚·ãƒ§ãƒ³ç•ªå·ã¨ãƒ¬ãƒƒã‚¹ãƒ³ç•ªå·
2. ä½•ã‚’ã—ã‚ˆã†ã¨ã—ã¦ã„ãŸã‹
3. ã‚¨ãƒ©ãƒ¼æ–‡ã‚’ã‚³ãƒ”ãƒ¼&ãƒšãƒ¼ã‚¹ãƒˆ
4. ã‚¨ãƒ©ãƒ¼ç”»é¢ã®ã‚¹ã‚¯ãƒªãƒ¼ãƒ³ã‚·ãƒ§ãƒƒãƒˆ
```
---
æ¬¡ã®ãƒ¬ãƒƒã‚¹ãƒ³ã§ã¯ã€ãƒ†ã‚¹ãƒˆç’°å¢ƒã«ã‚ãªãŸã®ã‚¹ãƒãƒ¼ãƒˆã‚³ãƒ³ãƒˆãƒ©ã‚¯ãƒˆã‚’ãƒ‡ãƒ—ãƒ­ã‚¤ã—ã¾ã™ã€‚æ¬¡ã«é€²ã¿ã¾ã—ã‚‡ã†ğŸ‰
